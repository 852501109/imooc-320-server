(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4ad17d5a"],{1243:function(t,e,a){"use strict";a("bd5c")},"6b248":function(t,e,a){(t.exports=a("2350")(!1)).push([t.i,".latest[data-v-28000e2f]{text-decoration:underline}.get-edit-item[data-v-28000e2f]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-28000e2f]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-28000e2f]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-28000e2f]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-28000e2f]{width:100%;border:1px solid #dcdfe6;padding:24px}[data-v-28000e2f] .audaque-detail-form-page__form-btn{display:none}",""])},"9c87":function(t,e,a){"use strict";a.r(e),a("673e"),a("8e6e"),a("ac6a"),a("456d"),a("3b2b");var l=a("ade3"),i=a("2f62");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(l.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var s={data:function(){return{value:"",issub:!0,issub1:!0,rowId:this.$route.query.id,total:0,page:1,rows:10,columnlist:[],typelist:[],param:{page:1,rows:10,includeRole:!0,columnComment:"",columnName:"",columnType:"",id:"",length:"",nullAble:"",primaryKey:"",recordTime:"",scale:"",tableId:"",sourceColumnId:""},rules:{columnName:[{required:!0,message:"请输入字段名（英文）",trigger:"blur"}]},dialogFormVisible:!1,formLabelWidth:"120px"}},computed:{},methods:o(o({},Object(i.b)("modelStandard",["METADATACOLUMNINFOLISTBYTABLEID","ADDORUPDATESTANDARDCLOUMN","GETTYPELIST"])),{},{isnumsscale:function(){var t=new RegExp(/^[0-9]*$/);""!=this.param.scale?t.test(this.param.scale)?this.issub1=!0:(this.issub1=!1,this.$message.warning("请输入正整数的数字")):this.issub1=!0},isnums:function(){var t=new RegExp(/^[0-9]*$/);""!=this.param.length?t.test(this.param.length)?this.issub=!0:(this.issub=!1,this.$message.warning("请输入正整数的数字")):this.issub=!0},handleSizeChange:function(t){this.page=1,this.rows=t,this.getlist()},handleCurrentChange:function(t){this.page=t,this.getlist()},getlist:function(){var t=this;this.param={includeRole:!0},this.param.page=this.page,this.param.rows=this.rows,this.param.tableId=this.rowId,this.METADATACOLUMNINFOLISTBYTABLEID(this.param).then((function(e){t.columnlist=e.rows,t.total=e.total}))},openadd:function(t){this.param=Object.assign({},t),this.param.columnComment=this.param.columnName+"标准列",this.param.columnName=this.param.columnName+"_new",this.param.primaryKey=0,this.param.nullAble=1,this.param.page=this.page,this.gettypelist(),this.dialogFormVisible=!0},gettypelist:function(){var t=this;this.GETTYPELIST().then((function(e){t.typelist=e}))},openupdate:function(t){this.param=Object.assign({},t),this.param.page=this.page,this.gettypelist(),this.param.primaryKey=0,this.param.nullAble=0,this.dialogFormVisible=!0},cancel:function(){this.param.page=this.page,this.dialogFormVisible=!1},sub:function(){var t=this;this.issub&&this.issub1?("numeric"!=this.param.columnType&&"character varying"!=this.param.columnType&&"character"!=this.param.columnType||""===this.param.length&&(this.issub=!1,this.$message.warning("该类型的长度不可为空，请填写长度")),"numeric"==this.param.columnType&&""===this.param.scale&&(this.issub1=!1,this.$message.warning("该类型的精度不可为空，请填写精度")),this.issub&&this.issub1&&this.$refs.metadataColumnInfoForm.validate((function(e){if(!e)return!1;0==t.param.sourceColumnId&&(t.param.sourceColumnId=t.param.id,t.param.id=null);var a=t;t.$AudaqueToast.warn({template:"确认是否添加或修改？",methods:{okEvent:function(){a.$store.commit("SHOW_LOADING",!0),a.ADDORUPDATESTANDARDCLOUMN(a.param).then((function(){a.$AudaqueToast.tip({template:"添加或修改成功",methods:{okEvent:function(){a.param={page:1,rows:10,includeRole:!0},a.getlist(),a.dialogFormVisible=!1}}})}))}}})}))):this.$message.warning("请检查长度或者精度是否是正整数!")}}),mounted:function(){},created:function(){this.getlist()}},n=(a("1243"),a("2877")),p=Object(n.a)(s,(function(){var t=this,e=t._self._c;return e("audaque-detail-form-page",{attrs:{title:"新增标准列"}},[[e("el-table",{staticClass:"el-table-common__list",attrs:{"tooltip-effect":"light","highlight-current-row":"",stripe:"",data:t.columnlist,border:""}},[e("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",label:"序号",index:function(e){return t.$utils._indexMethod(e,t.page,t.rows)},align:"center",width:"80"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"columnName",label:"列名"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"columnComment",label:"注释"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"columnType",label:"类型"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"nullAble",label:"是否可为空"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.nullAble?e("span",[t._v("N")]):t._e(),1==a.row.nullAble?e("span",[t._v("Y")]):t._e()]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"length",label:"长度"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"scale",label:"精度"}}),e("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.isadd?e("el-button",{staticClass:"latest",attrs:{type:"text"},on:{click:function(e){return t.openadd(a.row)}}},[t._v("添加标准列")]):t._e(),0!=a.row.sourceColumnId?e("el-button",{staticClass:"latest",attrs:{type:"text"},on:{click:function(e){return t.openupdate(a.row)}}},[t._v("修改标准列")]):t._e()]}}])})],1),e("adq-pagination",{attrs:{"current-page":t.param.page,total:t.total,"page-size":t.param.rows},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],e("el-dialog",{attrs:{title:"添加标准列",visible:t.dialogFormVisible,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{ref:"metadataColumnInfoForm",staticClass:"form-item",attrs:{model:t.param,"label-width":"120px",rules:t.rules}},[e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"字段名",prop:"columnName",rules:t.rules.columnName}},[e("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入字段名（英文）",maxlength:"200","show-word-limit":""},model:{value:t.param.columnName,callback:function(e){t.$set(t.param,"columnName","string"==typeof e?e.trim():e)},expression:"param.columnName"}})],1),e("el-form-item",{attrs:{label:"字段备注",prop:"columnComment"}},[e("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入字段备注",maxlength:"200","show-word-limit":""},model:{value:t.param.columnComment,callback:function(e){t.$set(t.param,"columnComment","string"==typeof e?e.trim():e)},expression:"param.columnComment"}})],1),e("el-form-item",{attrs:{label:"数据类型",prop:"columnType"}},[e("el-select",{staticClass:"autoSize f14",staticStyle:{width:"400px"},attrs:{placeholder:"请选择数据类型"},model:{value:t.param.columnType,callback:function(e){t.$set(t.param,"columnType","string"==typeof e?e.trim():e)},expression:"param.columnType"}},t._l(t.typelist,(function(t){return e("el-option",{key:t.type,attrs:{label:t.type,value:t.type}})})),1)],1),e("el-form-item",{attrs:{label:"数据长度",prop:"length"}},[e("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入数据长度",maxlength:"200","show-word-limit":""},on:{change:t.isnums},model:{value:t.param.length,callback:function(e){t.$set(t.param,"length","string"==typeof e?e.trim():e)},expression:"param.length"}})],1),e("el-form-item",{attrs:{label:"是否可为空",prop:"nullAble"}},[e("el-radio-group",{attrs:{disabled:!0,maxlength:"200","show-word-limit":""},model:{value:t.param.nullAble,callback:function(e){t.$set(t.param,"nullAble","string"==typeof e?e.trim():e)},expression:"param.nullAble"}},[e("el-radio",{attrs:{label:1}},[t._v("可为空")]),e("el-radio",{attrs:{label:0}},[t._v("不可为空")])],1)],1),e("el-form-item",{attrs:{label:"是否主键",prop:"primaryKey"}},[e("el-radio-group",{attrs:{maxlength:"200",disabled:!0,"show-word-limit":""},model:{value:t.param.primaryKey,callback:function(e){t.$set(t.param,"primaryKey","string"==typeof e?e.trim():e)},expression:"param.primaryKey"}},[e("el-radio",{attrs:{label:0}},[t._v("不是")]),e("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1),e("el-form-item",{attrs:{label:"精度",prop:"scale"}},[e("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入精度",maxlength:"200","show-word-limit":""},on:{change:t.isnumsscale},model:{value:t.param.scale,callback:function(e){t.$set(t.param,"scale","string"==typeof e?e.trim():e)},expression:"param.scale"}})],1)],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.sub}},[t._v("确 定")])],1)],1)],2)}),[],!1,null,"28000e2f",null);e.default=p.exports},bd5c:function(t,e,a){var l=a("6b248");l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals),(0,a("499e").default)("fd1bb724",l,!0,{sourceMap:!1,shadowMode:!1})}}]);