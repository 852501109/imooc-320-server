(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4e47a10c","chunk-260e9760"],{"08c5":function(e,t,a){"use strict";a("d666")},"1b1c":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,"[data-v-529af9ae] .CodeMirror{color:#000;direction:ltr;line-height:22px;border:1px solid #e7e7e7}.CodeMirror-hints[data-v-529af9ae]{z-index:9999!important}[data-v-529af9ae] .CodeMirror pre.CodeMirror-placeholder{color:#929292;font-size:15px}",""])},"27ff":function(e,t,a){var r=a("1b1c");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,a("499e").default)("5ab48a70",r,!0,{sourceMap:!1,shadowMode:!1})},"3b2d":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".get-edit-item[data-v-91aa747e]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-91aa747e]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-91aa747e]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-91aa747e]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-91aa747e]{width:100%;border:1px solid #dcdfe6;padding:24px}.row[data-v-91aa747e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.gxpl[data-v-91aa747e]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gxpl>div[data-v-91aa747e]{width:49.8%}",""])},abb6:function(e,t,a){"use strict";a.r(t),a("b866"),a("a7be"),a("f6b6"),a("d7d5");var r=a("db05"),o=a.n(r),i=a("56b3");a("8c33"),a("31c5"),a("ffda"),a("9b74"),a("991c");var s={data:function(){return{editor:null}},props:{value:{type:String,default:""},sqlStyle:{type:String,default:"default"},readOnly:{type:[Boolean,String]},placeholder:{type:String,default:""}},watch:{newVal:function(e,t){this.editor&&this.$emit("changeTextarea",this.editor.getValue())}},computed:{newVal:function(){if(this.editor)return this.editor.getValue()},isView:function(){return"view"===this.$route.query.filter}},mounted:function(){this.initCodeMirror()},methods:{formaterSql:function(){this.editor.setValue(o.a.format(this.editor.getValue()))},initCodeMirror:function(){var e=this,t=this;this.editor=i.fromTextArea(this.$refs.mycode,{value:this.value,mode:"text/x-mariadb",indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,cursorHeight:1,lineWrapping:!0,readOnly:this.isView,theme:"idea",autofocus:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{completeSingle:!1},gutters:["myGutter","CodeMirror-linenumbers"],gutterWidth:40}),this.editor.on("inputRead",(function(){e.editor.showHint()})),this.editor.setOption("extraKeys",{"Ctrl-D":function(e){t.formaterSql()}})},setVal:function(){this.editor&&(""===this.value?this.editor.setValue(""):this.editor.setValue(this.value))}}},l=(a("d7f5"),a("2877")),n=Object(l.a)(s,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{border:"1px solid #409eff"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"mycode",staticClass:"codesql",attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])}),[],!1,null,"529af9ae",null);t.default=n.exports},b866:function(e,t,a){var r=a("d131");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,a("499e").default)("3875f97e",r,!0,{sourceMap:!1,shadowMode:!1})},c07a:function(e,t,a){"use strict";a.r(t),a("7f7f"),a("8e6e"),a("ac6a"),a("456d");var r=a("ade3"),o=a("2f62");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={data:function(){return{placeholder:"请输入主键计算逻辑，比如FSELSE_.DIM.customer.borndate > 1995，输入ctrl + d可格式化",radio:"1",value:"",rowId:this.$route.query.id,title:"view"===this.$route.query.filter?"查看原子指标":this.$route.query.id?"编辑原子指标":"新增原子指标",frequencyUnitList:[],tableList:[],colList:[],deptList:[],statuslist:[{name:"关闭",id:"0"},{name:"开启",id:"1"}],startOptions:[],endOptions:[],param:{id:"",slot1:"",slot2:"",slot3:"",slot4:"",slot5:"",slot6:"",slot7:"",slot8:"",slot9:"",slot10:"",slot11:""},rules:{slot1:[{required:!0,message:"请输入名称",trigger:"blur"}],slot2:[{required:!0,validator:this.checkDimName,trigger:"change"}],slot3:[{required:!0,message:"请选择表",trigger:"blur"}],slot4:[{required:!0,message:"请选择字段",trigger:"blur"}],slot5:[{required:!0,message:"请选择更新频率",trigger:"change"}],slot6:[{required:!0,message:"请选择频率单位",trigger:"change"}],slot7:[{required:!0,message:"请输入",trigger:"blur"}],slot9:[{required:!0,message:"请输入计算逻辑",trigger:"blur"}]}}},computed:{},components:{SqlEditor:a("abb6").default},methods:s(s(s({},Object(o.b)("develop",["QUERY_DAP_ATM_ACCOUNT_DETAIL","SAVE_DAP_ATM_ACCOUNT","GET_STAT_PERIOD_DATA_SOURCE_LIST"])),Object(o.b)(["_AJAX"])),{},{getFrequencyUnitList:function(){var e=this;this._AJAX({url:"dapAtmAccount.getFrequencyUnitList",method:"GET"}).then((function(t){1===t.code&&(e.frequencyUnitList=t.data)}))},checkDimName:function(e,t,a){return t?/^[a-zA-Z].*$/.test(t)?void a():a(new Error("必须以英文开头")):a(new Error("英文名不可为空"))},getTableList:function(){var e=this;this._AJAX({url:"dapAtmAccount.getTableList",method:"GET"}).then((function(t){1===t.code&&(e.tableList=t.data)}))},getColList:function(e){var t=this;this.param.slot4="",this._AJAX({url:"dapAtmAccount.getColList",method:"GET",data:{tabId:e}}).then((function(e){1===e.code&&(t.colList=e.data)}))},getDeptList:function(){var e=this;this._AJAX({url:"dapAtmAccount.getDeptList",method:"GET"}).then((function(t){1===t.code&&(e.deptList=t.data)}))},getDataExist:function(){var e=this;this._AJAX({url:"dapAtmAccount.getDataExist",method:"GET"}).then((function(t){1===t.code&&(e.statuslist=t.data)}))},changeTextarea:function(e){this.$set(this.param,"slot9",e)},validateUpdateTime:function(e,t,a){""===t?a(new Error("请输入更新频率")):""===this.param.slot6&&a(new Error("请选择更新频率单位"))},validateExpress:function(e,t,a){this.param.beginExpressFuc?this.param.beginExpress?this.param.endExpressFuc?this.param.endExpress?a():a(new Error("请选择结束时间函数表达式")):a(new Error("请选择结束时间函数表达式函数")):a(new Error("请输入开始时间函数表达式")):a(new Error("请选择开始时间函数表达式函数"))},subBtn:function(){var e=this,t=this;this.$refs.subForm.validate((function(a){if(!a)return!1;if(e.$store.commit("SHOW_LOADING",!0),e.rowId){var r=e.param;e.SAVE_DAP_ATM_ACCOUNT(r).then((function(a){0==a.code&&e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}else{var o=e.param;e.SAVE_DAP_ATM_ACCOUNT(o).then((function(a){0==a.code&&e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}}))},getDataSourceList:function(){var e=this;this.GET_STAT_PERIOD_DATA_SOURCE_LIST().then((function(t){e.startOptions=t.result.startExpList,e.endOptions=t.result.endExpList}))}}),mounted:function(){},created:function(){this.getDataExist(),this.getDeptList(),this.getTableList(),this.getDataSourceList(),this.getFrequencyUnitList(),this.rowId&&this.QUERY_DAP_ATM_ACCOUNT_DETAIL({id:this.rowId}).then((function(e){}))}},n=(a("08c5"),a("2877")),c=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{attrs:{title:e.title,"opt-type":e.$route.query.filter},on:{"submit-click":e.subBtn}},[[t("el-form",{ref:"subForm",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:"view"===e.$route.query.filter}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"名称",prop:"slot1",rules:e.rules.slot1}},[t("el-input",{attrs:{placeholder:"请输入名称","show-word-limit":""},model:{value:e.param.slot1,callback:function(t){e.$set(e.param,"slot1","string"==typeof t?t.trim():t)},expression:"param.slot1"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"英文名称",prop:"slot2",rules:e.rules.slot2}},[t("el-input",{attrs:{placeholder:"请输入英文名称","show-word-limit":""},model:{value:e.param.slot2,callback:function(t){e.$set(e.param,"slot2","string"==typeof t?t.trim():t)},expression:"param.slot2"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"选择表",prop:"slot3",rules:e.rules.slot3}},[t("el-select",{staticClass:"autoSize f14",attrs:{placeholder:"请选择",maxlength:"50",clearable:""},on:{change:e.getColList},model:{value:e.param.slot3,callback:function(t){e.$set(e.param,"slot3",t)},expression:"param.slot3"}},e._l(e.tableList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"选择字段",prop:"slot4",rules:e.rules.slot4}},[t("el-select",{staticClass:"autoSize f14",attrs:{placeholder:"请选择",maxlength:"50",clearable:""},model:{value:e.param.slot4,callback:function(t){e.$set(e.param,"slot4",t)},expression:"param.slot4"}},e._l(e.startOptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属部门",prop:"slot10",rules:e.rules.slot10}},[t("el-select",{staticClass:"autoSize f14",attrs:{placeholder:"请选择所属部门",maxlength:"50",clearable:""},model:{value:e.param.slot10,callback:function(t){e.$set(e.param,"slot10",t)},expression:"param.slot10"}},e._l(e.frequencyUnitList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"来源依据",prop:"slot11",rules:e.rules.slot11}},[t("el-input",{attrs:{placeholder:"请输入来源依据","show-word-limit":""},model:{value:e.param.slot11,callback:function(t){e.$set(e.param,"slot11","string"==typeof t?t.trim():t)},expression:"param.slot11"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"描述",prop:"slot8",rules:e.rules.slot8}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入指标描述","show-word-limit":""},model:{value:e.param.slot8,callback:function(t){e.$set(e.param,"slot8","string"==typeof t?t.trim():t)},expression:"param.slot8"}})],1),t("el-form-item",{attrs:{label:"计算逻辑",prop:"slot9",rules:e.rules.slot9}},[t("SqlEditor",{ref:"sqleditor",attrs:{value:e.param.slot9,placeholder:e.placeholder},on:{changeTextarea:function(t){return e.changeTextarea(t)}}})],1)],1)],1)],1)]],2)}),[],!1,null,"91aa747e",null);t.default=c.exports},d131:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".cm-s-idea span.cm-meta{color:olive}.cm-s-idea span.cm-number{color:#00f}.cm-s-idea span.cm-keyword{line-height:1em;font-weight:700;color:navy}.cm-s-idea span.cm-atom{font-weight:700;color:navy}.cm-s-idea span.cm-def,.cm-s-idea span.cm-operator,.cm-s-idea span.cm-property,.cm-s-idea span.cm-type,.cm-s-idea span.cm-variable,.cm-s-idea span.cm-variable-2,.cm-s-idea span.cm-variable-3{color:#000}.cm-s-idea span.cm-comment{color:grey}.cm-s-idea span.cm-string,.cm-s-idea span.cm-string-2{color:green}.cm-s-idea span.cm-qualifier{color:#555}.cm-s-idea span.cm-error{color:red}.cm-s-idea span.cm-attribute{color:#00f}.cm-s-idea span.cm-tag{color:navy}.cm-s-idea span.cm-link{color:#00f}.cm-s-idea .CodeMirror-activeline-background{background:#fffae3}.cm-s-idea span.cm-builtin{color:#30a}.cm-s-idea span.cm-bracket{color:#cc7}.cm-s-idea{font-family:Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif}.cm-s-idea .CodeMirror-matchingbracket{outline:1px solid grey;color:#000!important}.CodeMirror-hints.idea{font-family:Menlo,Monaco,Consolas,Courier New,monospace;color:#616569;background-color:#ebf3fd!important}.CodeMirror-hints.idea .CodeMirror-hint-active{background-color:#a2b8c9!important;color:#5c6065!important}",""])},d666:function(e,t,a){var r=a("3b2d");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,a("499e").default)("19ee924a",r,!0,{sourceMap:!1,shadowMode:!1})},d7d5:function(e,t,a){!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function a(e){t(e);var a=e.state.placeholder=document.createElement("pre");a.style.cssText="height: 0; overflow: visible",a.style.direction=e.getOption("direction"),a.className="CodeMirror-placeholder CodeMirror-line-like";var r=e.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),a.appendChild(r),e.display.lineSpace.insertBefore(a,e.display.lineSpace.firstChild)}function r(e){i(e)&&a(e)}function o(e){var r=e.getWrapperElement(),o=i(e);r.className=r.className.replace(" CodeMirror-empty","")+(o?" CodeMirror-empty":""),o?a(e):t(e)}function i(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(i,s,l){var n=l&&l!=e.Init;if(s&&!n)i.on("blur",r),i.on("change",o),i.on("swapDoc",o),e.on(i.getInputField(),"compositionupdate",i.state.placeholderCompose=function(){!function(e){setTimeout((function(){var r=!1;if(1==e.lineCount()){var o=e.getInputField();r="TEXTAREA"==o.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(o.querySelector(".CodeMirror-line").textContent)}r?a(e):t(e)}),20)}(i)}),o(i);else if(!s&&n){i.off("blur",r),i.off("change",o),i.off("swapDoc",o),e.off(i.getInputField(),"compositionupdate",i.state.placeholderCompose),t(i);var c=i.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}s&&!i.hasFocus()&&r(i)}))}(a("56b3"))},d7f5:function(e,t,a){"use strict";a("27ff")}}]);