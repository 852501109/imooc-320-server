(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9f7bfcb0","chunk-a80e03d8"],{"2c90":function(e,a,t){(e.exports=t("2350")(!1)).push([e.i,".get-edit-item[data-v-3c49d67a]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-3c49d67a]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-3c49d67a]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-3c49d67a]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-3c49d67a]{width:100%;border:1px solid #dcdfe6;padding:24px}.custom_table1 tbody td[data-v-3c49d67a],.custom_table1 thead th[data-v-3c49d67a]{width:20%}.custom_table[data-v-3c49d67a]{border-collapse:collapse;width:100%;text-align:center}.custom_table thead tr[data-v-3c49d67a]{background:#f9fafb}.custom_table thead th[data-v-3c49d67a]{color:#666;font-size:13px}.custom_table tbody tr[data-v-3c49d67a]{border:1px solid #ebeef5;padding:5px 0}.custom_table tbody i[data-v-3c49d67a]{color:red;font-size:30px;cursor:pointer}.rule-type[data-v-3c49d67a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.rule-type span[data-v-3c49d67a]{display:inline-block}.require[data-v-3c49d67a]{color:#f56c6c}",""])},"2f60":function(e,a,t){var r=t("2c90");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,t("499e").default)("3ac7916a",r,!0,{sourceMap:!1,shadowMode:!1})},"465f":function(e,a,t){"use strict";t("2f60")},"4bbe":function(e,a,t){"use strict";t.r(a),t("6762"),t("2fdb"),t("a481"),t("8e6e"),t("ac6a"),t("456d"),t("c5f6"),t("7514");var r=t("ade3"),l=t("2f62");function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){Object(r.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var s={props:{show:{type:Boolean,default:!1},currentSelectDatabase:{type:Object,default:function(){}},currentLayerValue:{type:String,default:""}},data:function(){return{storey:["au_ods","au_std","au_dwd","au_dwm","au_dws","au_app"],datas:[],templateSelection:"",tableData:[],selectedRow:null,multipleSelection:[],defaultProps:{label:"name",children:"children"},treeExpandData:[],searchText:"",param:{code:"",type:"",tagId:null,tableNameOrComment:"",page:1,rows:10,total:0}}},components:{},computed:{},mounted:function(){this.init(),this.$nextTick((function(){document.querySelector(".pane-comp")&&(document.querySelector(".pane-comp").style.width="177px")}))},methods:o(o(o({},Object(l.b)("fusionTask",["GET_TREE"])),Object(l.b)(["_AJAX"])),{},{init:function(){var e=this;this.$nextTick((function(){var a=document.querySelector(".custom-container");a&&(a.style.height=a.clientHeight+"px",e.getTree().then((function(){e.selectCurrent()})))}))},selectCurrent:function(){this.param.page=1,this.param.rows=10,this.param.code=this.currentSelectDatabase.code,this.param.type=this.currentSelectDatabase.type,this.param.tagId=null,this.param.tableNameOrComment="",this.getTable()},getTree:function(){var e=this;return new Promise((function(a,t){e.param.tableNameOrComment="",e.GET_TREE().then((function(t){e.datas=t||[],e.treeExpandData.push("1"),a(t)})).catch((function(e){t(e)}))}))},onSearch:function(){this.getTable()},getTable:function(){var e=this,a={code:this.param.code,type:this.param.type+"",page:this.param.page,rows:this.param.rows,tableNameOrComment:this.param.tableNameOrComment};this.param.tagId&&(a.tagId=this.param.tagId),this._AJAX({url:"task.stepHeader.getTableByDBTag",method:"get",data:a}).then((function(a){e.tableData=a.rows,e.param.total=a.total}))},flattenArray:function(e){for(var a=[],t=0;t<e.length;t++)Array.isArray(e[t])?a=a.concat(this.flattenArray(e[t])):a.push(e[t]);return a},onSubmit:function(){var e=this,a=Array.isArray(this.templateSelection)?this.templateSelection:[this.tableData.find((function(a){return a.id===e.templateSelection}))];if((a=a.filter((function(e){return void 0!==e}))).some((function(e){return 0===e.tableIscreate}))&&this.storey.includes(this.currentSelectDatabase.code))return this.$AudaqueToast.warn({template:"选中的含有未创建表，请前往：模型分层-".concat(this.currentSelectDatabase.label,"中创建"),methods:{okEvent:function(){}}}),!1;this.$emit("submit",a)},isSelectable:function(e){return!0},handleClose:function(){this.$emit("close")},handleRowClick:function(e){this.selectedRow===e?this.selectedRow=null:this.selectedRow=e},handleSizeChange:function(e){this.param.page=1,this.param.rows=e,this.getTable()},handleCurrentChange:function(e){this.param.page=e,this.getTable()},handleCheckboxChange:function(e){e.checked||(this.selectedRow=null)},rowChange:function(e){this.templateSelection=e.id},handleSelectionChange:function(e){this.templateSelection=e},handleNodeClick:function(e){this.param.code=this.currentSelectDatabase.code,this.param.type=this.currentSelectDatabase.type,this.param.tagId=Number(e.id),this.param.page=1,this.param.rows=10,this.getTable()}})},n=(t("b363"),t("2877")),p=Object(n.a)(s,(function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{title:"库表选择",visible:e.show,width:"80%","before-close":e.handleClose,"append-to-body":""},on:{"update:visible":function(a){e.show=a}}},[a("div",{staticClass:"custom-container",staticStyle:{"min-height":"60vh"}},[a("audaque-resize-split-page",[a("template",{slot:"leftPane"},[a("div",{staticStyle:{"padding-left":"24px","white-space":"nowrap",overflow:"hidden"}},[e._v("\n                    当前库："),a("span",{staticStyle:{cursor:"pointer",color:"#409eff"},on:{click:e.selectCurrent}},[e._v(e._s(e.currentSelectDatabase.label)+"--")])]),a("el-tree",{staticClass:"tree-dashed",attrs:{data:e.datas,props:e.defaultProps,"default-expanded-keys":e.treeExpandData,"node-key":"id"},on:{"node-click":e.handleNodeClick}})],1),a("template",{slot:"rightPane"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticStyle:{width:"50%"}},[a("el-input",{attrs:{placeholder:"通过表名，表中文名模糊查询"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.param.tableNameOrComment,callback:function(a){e.$set(e.param,"tableNameOrComment",a)},expression:"param.tableNameOrComment"}})],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("筛选")])],1)]),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""},on:{"row-click":e.rowChange,"selection-change":e.handleSelectionChange}},["au_dwd"===e.currentLayerValue||"au_dws"===e.currentLayerValue?a("el-table-column",{attrs:{type:"selection",width:"55"}}):a("el-table-column",{attrs:{align:"center",width:"55",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"radio",attrs:{label:t.row.id},model:{value:e.templateSelection,callback:function(a){e.templateSelection=a},expression:"templateSelection"}},[e._v(" ")])]}}])}),a("el-table-column",{attrs:{width:"80",prop:"schemaName",label:"数据库名"}}),a("el-table-column",{attrs:{prop:"tableName",label:"表名"}}),a("el-table-column",{attrs:{prop:"tableComment",label:"表中文描述"}}),a("el-table-column",{attrs:{width:"80",prop:"dataNum",label:"数据量"}}),a("el-table-column",{attrs:{width:"100",prop:"tagFullName",label:"元数据标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.tagFullName?a("span",{domProps:{innerHTML:e._s(t.row.tagFullName.replace(/;/g,"<br>").replace(/,/g,"→").replace(/;$/,""))}}):e._e()]}}])}),e.storey.includes(e.currentSelectDatabase.code)?a("el-table-column",{attrs:{prop:"tableIscreate",label:"表是否已创建",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                            "+e._s(1===a.row.tableIscreate?"已创建":"未创建")+"\n                        ")]}}],null,!1,1411126668)}):e._e()],1),a("adq-pagination",{attrs:{"current-page":e.param.page,total:e.param.total,"page-size":e.param.rows},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)],1),a("div",{staticClass:"dialog-footer row",attrs:{slot:"footer"},slot:"footer"},[a("div",[a("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")])],1)])])}),[],!1,null,"00bffde8",null);a.default=p.exports},6425:function(e,a,t){"use strict";t.r(a),t("7f7f"),t("ac4d"),t("8a81"),t("5df3"),t("1c4c"),t("6b54"),t("8e6e"),t("456d"),t("7514");var r=t("2909"),l=(t("ac6a"),t("ade3")),i=t("2f62");function o(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,a){if(e){if("string"==typeof e)return s(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,a):void 0}}(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,n=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){n=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(n)throw i}}}}function s(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){Object(l.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var c={components:{tableSelectionPage:t("4bbe").default},data:function(){return{databaseList:[{label:"前置库",options:[]},{label:"",options:[]}],value:"",showTableSelectionPage:!1,rowId:this.$route.query.id,currentLayerValue:"",filter:"view"!=this.$route.query.filter,jarShow:!1,apiShow:!1,loginShow:!1,currentSelectDatabase:"",param:{apiType:1,id:"",taskCode:"",taskName:"",taskResult:"",taskCreateTime:"",taskLatestStartTime:"",taskCat:0,taskType:"2",cron:"",status:0,excuteType:"",remark:"",createUser:"",createTime:"",updateUser:"",updateTime:"",tableId:null,collectType:"",jarName:"",jarRemark:"",jarPath:"",jarId:null,sourceDatabase:"",sourceTableName:"",storeDatasourceId:null,storeTableId:null,gridData:[],loginEntity:{apiProtocol:"",apiType:0,apiUrl:"",id:null,requestDatatype:"",requestType:"",responseDatatype:"",storeDatasourceId:null,storeTableId:null,sucessField:"",sucessValue:"",reqDetails:[],resDetails:[]},apiEntity:{apiProtocol:"",apiType:1,apiUrl:"",id:null,requestDatatype:"",requestType:"",responseDatatype:"",storeDatasourceId:null,storeTableId:null,sucessField:"",sucessValue:"",reqDetails:[],resDetails:[]}},standardTypeOptions:[],selectedRuleData:[],cronPopover:!1,cron:"",currentTargetColumnId:null,currentIndex:null,rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],taskType:[{required:!0,message:"请选择任务类型",trigger:"select"}],cron:[{required:!0,message:"请输入cron表达式",trigger:"change"}],status:[{required:!0,message:"请输入任务状态",trigger:"blur"}],remark:[{required:!1,message:"请输入任务描述",trigger:"blur"}],jarName:[{}],jarRemark:[{}],taskCat:[{required:!1,message:"请输入任务描述",trigger:"blur"}],sourceTableName:[{required:!0,message:"请选择表",trigger:"blur"}]}}},computed:p(p({},Object(i.d)("fusionTask",["databaseConf"])),Object(i.d)("apiCollectTask",["taskTypeOptions","excuteTypeOptions","alreadyUploadJars","apiInnerFunc","paramPosition","paramDataType","paramType","requestType","apiType"])),methods:p(p(p(p(p({},Object(i.b)("fusionTask",["GET_DATA_BASE_LIST"])),Object(i.b)("apiCollectTask",["GETAPIINNERFUNC","GETPARAMPOSITION","GETPARAMDATATYPE","GETPARAMTYPE","GETREQUESTTYPE","GETAPITYPE","GETTASKTYPEOPTIONS_LIST","GET_ALREADY_UPLOAD_JARS","GOEDITAPICOLLECTTASK","MODIFYAPICOLLECTTASK","ADDAPICOLLECTTASK"])),Object(i.b)("metadataTableInfo",["METADATATABLEINFOCOLUMNDETAIL"])),Object(i.b)(["_AJAX"])),{},{changeCron:function(e){"3"==this.param.taskType?(this.$message.warning("手动执行不需要cron的表达式"),this.param.cron=""):this.param.cron=e},focusCron:function(){this.$nextTick((function(){document.getElementById("tab-1").click()}))},getIsCont:function(){"3"==this.param.taskType&&(this.param.cron="")},changeJar:function(e){this.param.jarName=e.jarName,this.param.jarPath=e.jarPath},addLoginReqParam:function(){this.param.loginEntity.reqDetails.push({paramType:"request",paramName:"",paramDataType:"",paramPosition:"",paramDefaultVal:"",loading:!1})},addApiReqParam:function(){this.param.apiEntity.reqDetails.push({paramType:"request",paramName:"",paramDataType:"",paramPosition:"",paramDefaultVal:"",loading:!1})},addLoginResParam:function(){this.param.loginEntity.resDetails.push({paramType:"response",paramName:"",paramDataType:"",paramPosition:"",paramDefaultVal:"",loading:!1})},addApiResParam:function(){this.param.apiEntity.resDetails.push({paramType:"response",paramName:"",paramDataType:"",paramPosition:"",paramColumnId:null,paramDefaultVal:"",loading:!1})},removeLoginReqParam:function(e){this.param.loginEntity.reqDetails.splice(e,1)},removeApiReqParam:function(e){this.param.apiEntity.reqDetails.splice(e,1)},removeLoginResParam:function(e){this.param.loginEntity.resDetails.splice(e,1)},removeApiResParam:function(e){this.param.apiEntity.resDetails.splice(e,1)},handleUpload:function(e){var a=this;this.param.jarName=e.target.files[0].name,this.formData=new FormData,this.formData.append("upFile",e.target.files[0]),this.loading=!0,this._AJAX({url:"apiCollectTask.uploadJar",data:this.formData,method:"POST"}).then((function(e){a.loading=!1,0===e.code?(a.param.jarPath=e.result.url,a.$message({message:"导入成功",type:"success"})):a.$message({message:"导入失败",type:"error"}),a.delFormData(),a.STANDARDCODELIST()})).catch((function(){a.loading=!1,a.delFormData()}))},delFormData:function(){this.$refs.upload.value=null;var e,a=o(this.formData.keys());try{for(a.s();!(e=a.n()).done;){var t=e.value;this.formData.delete(t)}}catch(e){a.e(e)}finally{a.f()}},radioChange:function(e){this.param.collectType=e,7===e?(this.jarShow=!1,this.apiShow=!0):8===e&&(this.apiShow=!1,this.loginShow=!1,this.jarShow=!0)},radioChangeLogin:function(e){0==e?this.loginShow=!0:1==e&&(this.loginShow=!1)},initMap:function(e){var a=this;e.length>0&&(this.param.sourceTableName=e[0].tableName,this.param.storeTableId=e[0].id,this.param.storeDatasourceId=e[0].datasourceId,this.METADATATABLEINFOCOLUMNDETAIL({tableId:e[0].id}).then((function(e){e&&e.length>0&&e.forEach((function(e){0==e.additionColumn&&a.param.gridData.push(e)})),a.tableShow=!0}))),this.showTableSelectionPage=!1},sourceChange:function(){this.param.sourceTableName=""},selectTable:function(){var e=[].concat(Object(r.a)(this.databaseList[0].options),Object(r.a)(this.databaseList[1].options)),a=this.param.sourceDatabase;this.currentSelectDatabase=e.find((function(e){return e.code===a})),this.showTableSelectionPage=!0},subBtn:function(){var e=this;if(7==this.param.taskCat&&1==this.param.apiType&&(""==this.param.apiEntity.apiUrl||""==this.param.apiEntity.apiProtocol||""==this.param.apiEntity.requestType||""==this.param.apiEntity.requestDatatype||""==this.param.apiEntity.requestDatatype||this.param.apiEntity.resDetails.length<1))return this.$message({message:"接口URL、接口类型、请求方式、参数格式、返回格式、结果解析不允许为空",type:"warning"});if(7==this.param.taskCat&&0==this.param.apiType&&(""==this.param.loginEntity.apiUrl||""==this.param.loginEntity.apiProtocol||""==this.param.loginEntity.requestType||""==this.param.loginEntity.requestDatatype||""==this.param.loginEntity.responseDatatype))return this.$message({message:"登录URL、登录接口类型、登录请求方式、登录参数格式、登录返回格式不允许为空",type:"warning"});var a=this;this.$refs.apiCollectTaskForm.validate((function(t){if(!t)return!1;if(e.$store.commit("SHOW_LOADING",!0),e.rowId){var r=e.param;r.id=e.rowId,e.MODIFYAPICOLLECTTASK(r).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){a.$router.go(-1)}}})}))}else{var l=e.param;e.ADDAPICOLLECTTASK(l).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){a.$router.go(-1)}}})}))}}))}}),mounted:function(){},created:function(){var e=this;this.rowId?this.GOEDITAPICOLLECTTASK({id:this.rowId}).then((function(a){e.param.id=a.id,e.param.taskCode=a.taskCode,e.param.taskName=a.taskName,e.param.taskResult=a.taskResult,e.param.taskCreateTime=a.taskCreateTime,e.param.taskLatestStartTime=a.taskLatestStartTime,e.param.taskCat=a.taskCat,7==a.taskCat?(e.jarShow=!1,e.apiShow=!0,null!=a.loginEntity?(e.param.loginEntity=a.loginEntity,e.loginShow=!0,e.param.apiType=0,null!=a.apiEntity&&(e.param.apiEntity=a.apiEntity)):null!=a.apiEntity&&(e.param.apiEntity=a.apiEntity)):(e.apiShow=!1,e.jarShow=!0,e.loginShow=!1,e.param.apiType=1),e.param.taskType=a.taskType+"",e.param.cron=a.cron,e.param.status=a.status,e.param.excuteType=a.excuteType,e.param.remark=a.remark,e.param.createUser=a.createUser,e.param.createTime=a.createTime,e.param.updateUser=a.updateUser,e.param.updateTime=a.updateTime,e.param.jarId=a.jarId,e.param.jarPath=a.jarPath,e.param.jarName=a.jarName,e.param.jarRemark=a.jarRemark,e.param.sourceDatabase=a.sourceDatabase,e.param.sourceTableName=a.sourceTableName,e.param.storeTableId=a.storeTableId,e.METADATATABLEINFOCOLUMNDETAIL({tableId:e.param.storeTableId}).then((function(a){a&&a.length>0&&a.forEach((function(a){0==a.additionColumn&&e.param.gridData.push(a)}))}))})):(this.param.taskCat=7,this.apiShow=!0),this.databaseList[1].options=[],this.GET_DATA_BASE_LIST().then((function(){e.databaseConf.frontDBList.forEach((function(a,t){e.databaseList[0].options.push({label:a.name,value:t+1,type:a.type,code:a.code})})),e.databaseConf.modelDBList.forEach((function(a,t){e.databaseList[1].options.push({label:a.name,value:t+1,type:a.type,code:a.code})}))})),this.GET_ALREADY_UPLOAD_JARS(),this.GETAPIINNERFUNC(),this.GETPARAMPOSITION(),this.GETPARAMDATATYPE(),this.GETPARAMTYPE(),this.GETREQUESTTYPE(),this.GETAPITYPE()}},m=(t("465f"),t("2877")),u=Object(m.a)(c,(function(){var e=this,a=e._self._c;return a("audaque-detail-form-page",{attrs:{title:e.filter?e.rowId?"修改api采集任务":"新建api采集任务":"api采集任务查看","opt-type":e.$route.query.filter},on:{"submit-click":e.subBtn}},[[a("el-form",{ref:"apiCollectTaskForm",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:!e.filter}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"任务名称",prop:"taskName",rules:e.rules.taskName}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入任务名称",maxlength:"200","show-word-limit":""},model:{value:e.param.taskName,callback:function(a){e.$set(e.param,"taskName","string"==typeof a?a.trim():a)},expression:"param.taskName"}})],1),a("el-form-item",{attrs:{label:"任务类型",prop:"taskType",rules:e.rules.taskType}},[a("el-radio-group",{attrs:{disabled:!e.filter},on:{change:e.getIsCont},model:{value:e.param.taskType,callback:function(a){e.$set(e.param,"taskType","string"==typeof a?a.trim():a)},expression:"param.taskType"}},e._l(e.taskTypeOptions,(function(t,r){return 1!=t.code?a("el-radio",{key:r,attrs:{label:t.code}},[e._v(e._s(t.name)+"\n                            ")]):e._e()})),1)],1),2==e.param.taskType?a("el-form-item",{attrs:{label:"调度计划",prop:"cron",rules:e.rules.cron}},[a("el-input",{attrs:{readonly:"",placeholder:"请输入cron表达式",maxlength:"200","show-word-limit":""},on:{focus:function(a){e.cronPopover=!0}},model:{value:e.param.cron,callback:function(a){e.$set(e.param,"cron","string"==typeof a?a.trim():a)},expression:"param.cron"}})],1):e._e(),a("el-form-item",{attrs:{label:"任务描述",prop:"remark",rules:e.rules.remark}},[a("el-input",{attrs:{type:"textarea",autosize:"",disabled:!e.filter,placeholder:"请输入任务描述",maxlength:"200","show-word-limit":""},model:{value:e.param.remark,callback:function(a){e.$set(e.param,"remark","string"==typeof a?a.trim():a)},expression:"param.remark"}})],1),a("el-form-item",{attrs:{label:"采集方式",prop:"taskCat",rules:e.rules.taskCat}},[a("el-radio-group",{attrs:{disabled:!e.filter},on:{change:e.radioChange},model:{value:e.param.taskCat,callback:function(a){e.$set(e.param,"taskCat",a)},expression:"param.taskCat"}},[a("el-radio",{attrs:{label:7}},[e._v("系统内置")]),a("el-radio",{attrs:{label:8}},[e._v("jar包扩展")])],1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.jarShow,expression:"jarShow"}]},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"JAR包",prop:"jarName",rules:e.rules.jarName}},[a("el-input",{attrs:{disabled:"",placeholder:"请上传jar包","show-word-limit":""},model:{value:e.param.jarName,callback:function(a){e.$set(e.param,"jarName","string"==typeof a?a.trim():a)},expression:"param.jarName"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{on:{click:function(a){return e.$refs.upload.click()}}},[e._v("点击上传\n                        "),a("input",{ref:"upload",staticClass:"inputFile",staticStyle:{display:"none"},attrs:{type:"file",accept:".jar"},on:{change:function(a){return e.handleUpload(a)}}})])],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{"value-key":"jarPath",placeholder:"选择已经上传的包",clearable:""},on:{change:e.changeJar},model:{value:e.param.jarName,callback:function(a){e.$set(e.param,"jarName",a)},expression:"param.jarName"}},e._l(e.alreadyUploadJars,(function(e){return a("el-option",{key:e.jarPath,attrs:{label:e.jarName,value:e}})})),1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.jarShow,expression:"jarShow"}]},[a("el-col",[a("el-form-item",{attrs:{label:"JAR包描述",prop:"remark",rules:e.rules.jarRemark}},[a("el-input",{attrs:{type:"textarea",autosize:"",disabled:!e.filter,placeholder:"请输入JAR包描述",maxlength:"200","show-word-limit":""},model:{value:e.param.jarRemark,callback:function(a){e.$set(e.param,"jarRemark","string"==typeof a?a.trim():a)},expression:"param.jarRemark"}})],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.apiShow,expression:"apiShow"}]},[a("el-col",[a("el-form-item",{attrs:{label:"是否需要登录",prop:"taskCat",rules:e.rules.apiType}},[a("el-radio-group",{attrs:{disabled:!e.filter},on:{change:e.radioChangeLogin},model:{value:e.param.apiType,callback:function(a){e.$set(e.param,"apiType",a)},expression:"param.apiType"}},[a("el-radio",{attrs:{label:0}},[e._v("是")]),a("el-radio",{attrs:{label:1}},[e._v("否")])],1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.loginShow,expression:"loginShow"}]},[a("el-col",[a("el-form-item",{attrs:{label:"登录URL",prop:"apiUrl"}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入登录URL",maxlength:"200","show-word-limit":""},model:{value:e.param.loginEntity.apiUrl,callback:function(a){e.$set(e.param.loginEntity,"apiUrl","string"==typeof a?a.trim():a)},expression:"param.loginEntity.apiUrl"}})],1),a("el-form-item",{attrs:{label:"登录接口类型",prop:"apiProtocol"}},[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:e.param.loginEntity.apiProtocol,callback:function(a){e.$set(e.param.loginEntity,"apiProtocol",a)},expression:"param.loginEntity.apiProtocol"}},e._l(e.apiType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"登录请求方式",prop:"requestType"}},[a("el-radio-group",{attrs:{disabled:!e.filter},model:{value:e.param.loginEntity.requestType,callback:function(a){e.$set(e.param.loginEntity,"requestType",a)},expression:"param.loginEntity.requestType"}},e._l(e.requestType,(function(t){return a("el-radio",{key:t.code,attrs:{label:t.name}},[e._v(e._s(t.name)+"\n                            ")])})),1)],1),a("el-form-item",{attrs:{label:"登录参数格式",prop:"requestDatatype"}},[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:e.param.loginEntity.requestDatatype,callback:function(a){e.$set(e.param.loginEntity,"requestDatatype",a)},expression:"param.loginEntity.requestDatatype"}},e._l(e.paramType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:"登录请求参数"}}),a("table",{staticClass:"custom_table custom_table1"},[a("thead",[a("tr",[a("th",[e._v("参数名")]),a("th",[e._v("参数类型")]),a("th",[e._v("参数位置")]),a("th",[e._v("参数值")]),a("th",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增",placement:"top-start"}},[e.filter?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:e.addLoginReqParam}}):e._e()],1)],1)])]),a("tbody",e._l(e.param.loginEntity.reqDetails,(function(t,r){return a("tr",{key:r},[a("td",[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:t.paramName,callback:function(a){e.$set(t,"paramName","string"==typeof a?a.trim():a)},expression:"i.paramName"}})],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramDataType,callback:function(a){e.$set(t,"paramDataType",a)},expression:"i.paramDataType"}},e._l(e.paramDataType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramPosition,callback:function(a){e.$set(t,"paramPosition",a)},expression:"i.paramPosition"}},e._l(e.paramPosition,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("td",[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:t.paramDefaultVal,callback:function(a){e.$set(t,"paramDefaultVal","string"==typeof a?a.trim():a)},expression:"i.paramDefaultVal"}})],1),a("td",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[e.filter?a("i",{staticClass:"el-icon-remove",style:{color:"view"===e.filter?"#f08383":"#f00"},on:{click:function(a){return e.removeLoginReqParam(r)}}}):e._e()])],1)])})),0)]),a("br"),a("el-form-item",{attrs:{label:"登录返回格式",prop:"responseDatatype"}},[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:e.param.loginEntity.responseDatatype,callback:function(a){e.$set(e.param.loginEntity,"responseDatatype",a)},expression:"param.loginEntity.responseDatatype"}},e._l(e.paramType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.loginShow,expression:"loginShow"}]},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"登录成功参数为",prop:"sucessField"}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请填写参数名",maxlength:"200","show-word-limit":""},model:{value:e.param.loginEntity.sucessField,callback:function(a){e.$set(e.param.loginEntity,"sucessField","string"==typeof a?a.trim():a)},expression:"param.loginEntity.sucessField"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"值为"}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请填写表示成功的值",maxlength:"200","show-word-limit":""},model:{value:e.param.loginEntity.sucessValue,callback:function(a){e.$set(e.param.loginEntity,"sucessValue","string"==typeof a?a.trim():a)},expression:"param.loginEntity.sucessValue"}})],1)],1),a("el-col",{attrs:{span:1}},[a("el-form-item",{attrs:{label:"表示成功"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.loginShow,expression:"loginShow"}]},[a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:"登录结果解析"}}),a("table",{staticClass:"custom_table custom_table1"},[a("thead",[a("tr",[a("th",[e._v("参数名")]),a("th",[e._v("参数类型")]),a("th",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增",placement:"top-start"}},[e.filter?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:e.addLoginResParam}}):e._e()],1)],1)])]),a("tbody",e._l(e.param.loginEntity.resDetails,(function(t,r){return a("tr",{key:r},[a("td",[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:t.paramName,callback:function(a){e.$set(t,"paramName","string"==typeof a?a.trim():a)},expression:"i.paramName"}})],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramDataType,callback:function(a){e.$set(t,"paramDataType",a)},expression:"i.paramDataType"}},e._l(e.paramDataType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("td",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[e.filter?a("i",{staticClass:"el-icon-remove",style:{color:"view"===e.filter?"#f08383":"#f00"},on:{click:function(a){return e.removeLoginResParam(r)}}}):e._e()])],1)])})),0)]),a("br")],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.apiShow,expression:"apiShow"}]},[a("el-col",[a("el-form-item",{attrs:{label:"接口URL",prop:"apiUrl"}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入URL",maxlength:"200","show-word-limit":""},model:{value:e.param.apiEntity.apiUrl,callback:function(a){e.$set(e.param.apiEntity,"apiUrl","string"==typeof a?a.trim():a)},expression:"param.apiEntity.apiUrl"}})],1),a("el-form-item",{attrs:{label:"接口类型",prop:"apiProtocol"}},[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:e.param.apiEntity.apiProtocol,callback:function(a){e.$set(e.param.apiEntity,"apiProtocol",a)},expression:"param.apiEntity.apiProtocol"}},e._l(e.apiType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"请求方式",prop:"requestType"}},[a("el-radio-group",{attrs:{disabled:!e.filter},model:{value:e.param.apiEntity.requestType,callback:function(a){e.$set(e.param.apiEntity,"requestType",a)},expression:"param.apiEntity.requestType"}},e._l(e.requestType,(function(t){return a("el-radio",{key:t.code,attrs:{label:t.name}},[e._v(e._s(t.name)+"\n                            ")])})),1)],1),a("el-form-item",{attrs:{label:"参数格式",prop:"requestDatatype"}},[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:e.param.apiEntity.requestDatatype,callback:function(a){e.$set(e.param.apiEntity,"requestDatatype",a)},expression:"param.apiEntity.requestDatatype"}},e._l(e.paramType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:"请求参数"}}),a("table",{staticClass:"custom_table custom_table1"},[a("thead",[a("tr",[a("th",[e._v("参数名")]),a("th",[e._v("参数类型")]),a("th",[e._v("参数位置")]),a("th",[e._v("参数值")]),a("th",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增",placement:"top-start"}},[e.filter?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:e.addApiReqParam}}):e._e()],1)],1)])]),a("tbody",e._l(e.param.apiEntity.reqDetails,(function(t,r){return a("tr",{key:r},[a("td",[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:t.paramName,callback:function(a){e.$set(t,"paramName","string"==typeof a?a.trim():a)},expression:"i.paramName"}})],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramDataType,callback:function(a){e.$set(t,"paramDataType",a)},expression:"i.paramDataType"}},e._l(e.paramDataType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramPosition,callback:function(a){e.$set(t,"paramPosition",a)},expression:"i.paramPosition"}},e._l(e.paramPosition,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("td",[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:t.paramDefaultVal,callback:function(a){e.$set(t,"paramDefaultVal","string"==typeof a?a.trim():a)},expression:"i.paramDefaultVal"}})],1),a("td",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[e.filter?a("i",{staticClass:"el-icon-remove",style:{color:"view"===e.filter?"#f08383":"#f00"},on:{click:function(a){return e.removeApiReqParam(r)}}}):e._e()])],1)])})),0)]),a("br"),a("el-form-item",{attrs:{label:"返回格式",prop:"responseDatatype"}},[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:e.param.apiEntity.responseDatatype,callback:function(a){e.$set(e.param.apiEntity,"responseDatatype",a)},expression:"param.apiEntity.responseDatatype"}},e._l(e.paramType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"成功参数为",prop:"sucessField"}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请填写参数名",maxlength:"200","show-word-limit":""},model:{value:e.param.apiEntity.sucessField,callback:function(a){e.$set(e.param.apiEntity,"sucessField","string"==typeof a?a.trim():a)},expression:"param.apiEntity.sucessField"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"值为"}},[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请填写表示成功的值",maxlength:"200","show-word-limit":""},model:{value:e.param.apiEntity.sucessValue,callback:function(a){e.$set(e.param.apiEntity,"sucessValue","string"==typeof a?a.trim():a)},expression:"param.apiEntity.sucessValue"}})],1)],1),a("el-col",{attrs:{span:1}},[a("el-form-item",{attrs:{label:"表示成功"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.apiShow,expression:"apiShow"}]},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"数据存储库",prop:"sourceDatabase"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",disabled:!e.filter},on:{change:e.sourceChange},model:{value:e.param.sourceDatabase,callback:function(a){e.$set(e.param,"sourceDatabase",a)},expression:"param.sourceDatabase"}},e._l(e.databaseList,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.code,attrs:{label:e.label,value:e.code}})})),1)})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"存储表名",rules:e.rules.sourceTableName,prop:"sourceTableName"}},[a("el-input",{attrs:{disabled:"",placeholder:"请选择表","show-word-limit":""},model:{value:e.param.sourceTableName,callback:function(a){e.$set(e.param,"sourceTableName","string"==typeof a?a.trim():a)},expression:"param.sourceTableName"}})],1)],1),a("el-col",{attrs:{span:3}},[e._v("\n                     \n                    "),a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.selectTable}},[e._v("选择 ")])],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.apiShow,expression:"apiShow"}]},[a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:"结果解析"}}),a("table",{staticClass:"custom_table custom_table1"},[a("thead",[a("tr",[a("th",[e._v("参数名")]),a("th",[e._v("参数类型")]),a("th",[e._v("字段对应")]),a("th",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增",placement:"top-start"}},[e.filter?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:e.addApiResParam}}):e._e()],1)],1)])]),a("tbody",e._l(e.param.apiEntity.resDetails,(function(t,r){return a("tr",{key:r},[a("td",[a("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:t.paramName,callback:function(a){e.$set(t,"paramName","string"==typeof a?a.trim():a)},expression:"i.paramName"}})],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramDataType,callback:function(a){e.$set(t,"paramDataType",a)},expression:"i.paramDataType"}},e._l(e.paramDataType,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("td",[a("el-select",{attrs:{disabled:!e.filter,placeholder:"请选择",clearable:""},model:{value:t.paramColumnId,callback:function(a){e.$set(t,"paramColumnId",a)},expression:"i.paramColumnId"}},e._l(e.param.gridData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.columnName,value:e.id}})})),1)],1),a("td",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[e.filter?a("i",{staticClass:"el-icon-remove",style:{color:"view"===e.filter?"#f08383":"#f00"},on:{click:function(a){return e.removeApiResParam(r)}}}):e._e()])],1)])})),0)]),a("br")],1)],1)],e.cronPopover?a("new-cron",{attrs:{cronPopover:e.cronPopover,defaultVal:e.param.cron},on:{close:function(a){e.cronPopover=!1},change:e.changeCron}}):e._e(),e.showTableSelectionPage?a("table-selection-page",{attrs:{show:e.showTableSelectionPage,currentSelectDatabase:e.currentSelectDatabase,currentLayerValue:e.param.sourceDatabase},on:{submit:e.initMap,close:function(a){e.showTableSelectionPage=!1}}}):e._e()],2)}),[],!1,null,"3c49d67a",null);a.default=u.exports},a4ff:function(e,a,t){var r=t("c208");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,t("499e").default)("2e75acb7",r,!0,{sourceMap:!1,shadowMode:!1})},b363:function(e,a,t){"use strict";t("a4ff")},c208:function(e,a,t){(e.exports=t("2350")(!1)).push([e.i,".row[data-v-00bffde8]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.row>div[data-v-00bffde8]:first-child{margin-right:10px}[data-v-00bffde8] .el-dialog__body{max-height:100%!important}[data-v-00bffde8] .pane-comp,[data-v-00bffde8] .tree-dashed{overflow:auto}",""])}}]);