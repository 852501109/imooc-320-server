(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d221be8"],{cc3e:function(e,r,t){"use strict";t.r(r),t("8e6e"),t("456d"),t("ac6a"),t("7f7f"),t("28a5"),t("6762");var l=t("ade3"),i=t("2f62");function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r&&(l=l.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,l)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){Object(l.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var s={created:function(){var e=this;this.token=sessionStorage.getItem("token");var r=this.$route.query.id;r&&this.APPDETAIL(r).then((function(r){var t=r.result.myApp;e.ruleForm=t}))},computed:a({},Object(i.d)(["upload"])),data:function(){return{small:!1,large:!1,imgVisible:!1,preview:"",smallIconFile:[],largeIconFile:[],ruleForm:{appType:1,appKey:"",appName:"",contextUrl:"",loginUrl:"",mainUrl:"",smallIcon:"",largeIcon:""},rules:{appType:{required:!0,message:"请指定应用KEY",trigger:"change"},appKey:[{required:!0,message:"请指定应用KEY",trigger:"blur"}],appName:[{required:!0,message:"请输入应用名称",trigger:"blur"},{min:2,max:30,message:"应用名称长度为2-30个字符",trigger:"blur"}],contextUrl:[{required:!0,message:"请输入服务上下文URL",trigger:"blur"},{max:200,message:"URL最多200个字符",trigger:"blur"}],loginUrl:[{required:!0,message:"请输入登录URL",trigger:"blur"},{max:200,message:"URL最多200个字符",trigger:"blur"}],mainUrl:[{required:!0,message:"请输入主页URL",trigger:"blur"},{max:200,message:"URL最多200个字符",trigger:"blur"}]},token:null,fileList:[]}},methods:a(a(a({},Object(i.b)(["LOADIMG","LOADFILE"])),Object(i.b)("webkit",["MODIFYAPP","ADDAPP","APPDETAIL"])),{},{getImg:function(e){var r=this,t=e.target,l=t.naturalWidth,i=t.naturalHeight;if(t.className.indexOf("small")>-1){if(l>130||i>131)return this.$message({type:"warning",message:"该图片尺寸超出小图标显示大小,请控制在 150 x 121像素内",showClose:!0}),setTimeout((function(){r.smallIconFile=[]}),500)}else if(l>170||i>170)return this.$message({type:"warning",message:"该图片尺寸超出大图标显示大小,请控制在 170 x 170像素内",showClose:!0}),this.handleRemove({url:t.src},"largeIcon"),setTimeout((function(){r.largeIconFile=[]}),500)},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(r){if(!r)return!1;var t=e,l=Object.assign({},e.ruleForm);2==l.appType&&e.$delete(l,"appKey"),e.$route.query.id?e.MODIFYAPP(l).then((function(r){e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){t.$router.go(-1)}}})})):e.ADDAPP(l).then((function(r){e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}))},handlePictureCardPreview:function(e){this.preview=e.url,this.imgVisible=!0},beforeAvatarUpload:function(e){var r=["jpg","png","gif"],t=!0;return e.size/1024>500?(this.$AudaqueToast.error({template:"上传图片大小必须小于500K",methods:{okEvent:function(){}}}),!1):(r.includes(e.name.split(".")[1])||(this.$AudaqueToast.error({template:"上传格式必须是."+r.join(","),methods:{okEvent:function(){}}}),t=!1),t)},handleSuccess:function(e,r,t){this[t+"File"]=r,this.ruleForm[t]=e.result},handleRemove:function(e,r){var t=this;this.ruleForm[r]="",this[r+"File"].forEach((function(l,i){(l.url||l.response.result)==(e.url||e.response.result)&&t[r+"File"].splice(i,1)}))}})},u=t("2877"),n=Object(u.a)(s,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("audaque-detail-form-page",{attrs:{title:e.$route.query.id?"编辑应用":"新增应用","opt-type":e.$route.query.filter},on:{"submit-click":e.submitForm}},[t("el-form",{ref:"ruleForm",staticClass:"source-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"120px"}},[t("el-form-item",{staticClass:"source-list",attrs:{label:"应用类型",prop:"type"}},[t("el-radio-group",{attrs:{disabled:!!e.$route.query.id},model:{value:e.ruleForm.appType,callback:function(r){e.$set(e.ruleForm,"appType",r)},expression:"ruleForm.appType"}},[t("el-radio",{attrs:{label:1}},[e._v("内部应用")]),t("el-radio",{attrs:{label:2}},[e._v("外部应用")])],1)],1),1==e.ruleForm.appType?t("el-form-item",{staticClass:"source-list",attrs:{label:"应用KEY",prop:"appKey"}},[t("el-input",{attrs:{disabled:!!e.$route.query.id,maxlength:"24","show-word-limit":""},model:{value:e.ruleForm.appKey,callback:function(r){e.$set(e.ruleForm,"appKey",r)},expression:"ruleForm.appKey"}})],1):e._e(),e.$route.query.id&&2==e.ruleForm.appType?t("el-form-item",{staticClass:"source-list",attrs:{label:"APPKEY",prop:"appKey"}},[t("el-input",{attrs:{disabled:!!e.$route.query.id},model:{value:e.ruleForm.appKey,callback:function(r){e.$set(e.ruleForm,"appKey",r)},expression:"ruleForm.appKey"}})],1):e._e(),e.$route.query.id&&2==e.ruleForm.appType?t("el-form-item",{staticClass:"source-list",attrs:{label:"APPSECRET",prop:"clientSecret"}},[t("el-input",{attrs:{disabled:!!e.$route.query.id},model:{value:e.ruleForm.clientSecret,callback:function(r){e.$set(e.ruleForm,"clientSecret",r)},expression:"ruleForm.clientSecret"}})],1):e._e(),t("el-form-item",{staticClass:"source-list",attrs:{label:"应用名称",prop:"appName"}},[t("el-input",{model:{value:e.ruleForm.appName,callback:function(r){e.$set(e.ruleForm,"appName",r)},expression:"ruleForm.appName"}})],1),t("el-form-item",{staticClass:"source-list",attrs:{label:"服务上下文URL",prop:"contextUrl"}},[t("el-input",{model:{value:e.ruleForm.contextUrl,callback:function(r){e.$set(e.ruleForm,"contextUrl",r)},expression:"ruleForm.contextUrl"}})],1),t("el-form-item",{staticClass:"source-list",attrs:{label:"登录URL",prop:"loginUrl"}},[t("el-input",{model:{value:e.ruleForm.loginUrl,callback:function(r){e.$set(e.ruleForm,"loginUrl",r)},expression:"ruleForm.loginUrl"}})],1),t("el-form-item",{staticClass:"source-list",attrs:{label:"主页URL",prop:"mainUrl"}},[t("el-input",{model:{value:e.ruleForm.mainUrl,callback:function(r){e.$set(e.ruleForm,"mainUrl",r)},expression:"ruleForm.mainUrl"}})],1)],1),t("template",{slot:"bottom"},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.$router.go(-1)}}},[e._v("取消")]),e.permitList.modifyApp?t("el-button",{attrs:{type:"primary",loading:e.isSHowButtonLoading},on:{click:e.submitForm}},[e._v("提交")]):e._e()],1),t("el-dialog",{attrs:{visible:e.imgVisible,width:"300px"},on:{"update:visible":function(r){e.imgVisible=r}}},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[t("img",{attrs:{src:e.preview}})])])],2)}),[],!1,null,null,null);r.default=n.exports}}]);