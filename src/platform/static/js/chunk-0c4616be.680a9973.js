(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0c4616be","chunk-2d0e9578","chunk-2d215faa"],{"057c":function(t,e,a){var i=a("67e0");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,a("499e").default)("66a1045e",i,!0,{sourceMap:!1,shadowMode:!1})},"67e0":function(t,e,a){(t.exports=a("2350")(!1)).push([t.i,".search-date[data-v-8fa4699e]{width:100%!important}[data-v-8fa4699e] .iconfont.iconshaixuan{padding-left:10px!important;padding-right:9px!important}",""])},"8cb9":function(t,e,a){t.exports=a.p+"static/img/tz.a21d0c83.png"},"92e2":function(t,e,a){"use strict";a.r(e),a("8e6e"),a("ac6a"),a("456d");var i=a("ade3"),n=a("2f62");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={data:function(){return{innerVisible:!1,contents:"",taskName:"",sensitiveData:[],dialogTableVisible:!1,dialogVisible:!1,dialogRuleVisible:!1,isSearch:!1,getHeight:!1,total:1,timeList:[],param:{includeRole:!0,page:1,rows:10,id:"",taskName:"",dbName:"",tableNameEn:"",tableNameCn:"",tableId:"",taskResult:"",taskCreateTime:"",taskLatestStartTime:"",taskCreateTimeBegin:"",taskCreateTimeEnd:"",taskType:"",createUser:"",createTime:"",updateUser:"",updateTime:""},paramHis:{includeRole:!0,page:1,rows:10,id:"",taskId:null},paramRule:{includeRole:!0,page:1,rows:10,id:""},search_dataRange:""}},computed:o(o({},Object(n.d)("sensitiveTaskInfo",["sensitiveTaskInfoList","senRuleList"])),Object(n.d)("taskHis",["taskHisList"])),methods:o(o(o(o(o(o(o({},Object(n.b)("dataFusionTask",["DATAFUSIONTASKLIST","DELETEDATAFUSIONTASK","BATCHMODIFYDATAFUSIONTASK","GETTASKEXCUTEOPTIONS_LIST","GETTASKTYPEOPTIONS_LIST","COPYTASK","MODIFYDATAFUSIONTASK"])),Object(n.b)("qualityTaskInfo",["TASKINFOLIST","DELETETASKINFO","GETTASKREPORTBYBATCHNO","GETLOGBYHISID"])),Object(n.b)("taskHis",["TASKHISLIST","DELETETASKHIS","TASKSTART","ADDTASKHIS"])),Object(n.b)("sensitiveTaskInfo",["TASKINFOLIST","DELETETASKINFO","SENRULELIST"])),Object(n.b)("taskHis",["TASKHISLIST","DELETETASKHIS"])),Object(n.b)(["_AJAX"])),{},{viewReport:function(t){this.publics.exportFile(this,"/tool/exportReport.do",{batchNo:t})},taskStart:function(t){var e=this,a=this;this.ADDTASKHIS({taskId:t}).then((function(){e.$AudaqueToast.tip({template:"任务执行中",methods:{okEvent:function(){a.initData()}}})}))},delAllRecord:function(t){var e=this;this._AJAX({url:"sensitiveTaskInfo.delAllRecord",method:"GET",data:{taskId:t}}).then((function(t){e.$message.success("删除所有报告成功!"),e.initData()}))},initData:function(){this.timeList?(this.param.taskCreateTimeBegin=this.timeList[0],this.param.taskCreateTimeEnd=this.timeList[1]):(this.param.taskCreateTimeBegin=null,this.param.taskCreateTimeEnd=null);var t=this.param;this.TASKINFOLIST(t)},initHisData:function(){var t=this.paramHis;this.TASKHISLIST(t)},initRuleData:function(){var t=this.paramRule;this.SENRULELIST(t)},getNew:function(t){t?this.publics.exportFile(this,"/tool/exportReport.do",{batchNo:t}):this.$message({message:"没有报告可以下载!",type:"warning"})},getHisList:function(t){this.$router.push("/sensitiveTaskInfo/sensitiveTaskHisInfoList?id="+t)},getChangeType:function(t){return 1==t?"成功":0==t?"执行中":null==t?"":"失败"},sensitiveDetail:function(t,e){var a=this;this.taskName=e,this._AJAX({url:"sensitiveTask.sensitiveDetail",method:"GET",data:{taskId:t}}).then((function(t){a.sensitiveData=t,a.dialogTableVisible=!0}))},getRuleList:function(t){this.SENRULELIST({taskId:t}),this.dialogRuleVisible=!0},handleSizeChange:function(t){this.param.page=1,this.param.rows=t,this.initData()},handleCurrentChange:function(t){this.param.page=t,this.initData()},handleHisSizeChange:function(t){this.paramHis.page=1,this.paramHis.rows=t,this.initHisData()},handleHisCurrentChange:function(t){this.paramHis.page=t,this.initHisData()},handleRuleSizeChange:function(t){this.paramRule.page=1,this.paramRule.rows=t,this.initRuleData()},handleRuleCurrentChange:function(t){this.paramRule.page=t,this.initRuleData()},QUERYLIST_PARAMS:function(t){var e=this;this.param.page=1,t>0&&this.publics.resetFun(this.param,(function(){e.param.rows=10,e.search_dataRange=null,e.timeList=[],e.param.taskCreateTimeBegin="",e.param.taskCreateTimeEnd=""})),this.initData()},delRow:function(t){var e=this;this.$AudaqueToast.warn({template:"确认删除？",methods:{okEvent:function(){e.$store.commit("SHOW_LOADING",!0),e.DELETETASKINFO({id:t}).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"删除成功",methods:{okEvent:function(){e.initData(),e.initHisData()}}})}))}}})},delHisRow:function(t){var e=this;this.$AudaqueToast.warn({template:"确认删除？",methods:{okEvent:function(){e.$store.commit("SHOW_LOADING",!0),e.DELETETASKHIS({id:t}).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"删除成功",methods:{okEvent:function(){e.initHisData(),e.initData()}}})}))}}})},goEdit:function(t){this.$router.push("/sensitiveTaskInfo/sensitiveTaskInfoEdit?filter=edit&id="+t)},goView:function(t,e){this.$router.push("/sensitiveTask/taskInfoEdit?filter=view&id="+t)},goViewHis:function(t){var e=this;this._AJAX({url:"sensitiveTaskInfo.goViewHis",method:"GET",data:{hisId:t}}).then((function(t){e.contents=t,e.innerVisible=!0}))}}),created:function(){this.initData()}},r=(a("d206"),a("2877")),c=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("audaque-table-list-page",[e("template",{slot:"title"},[e("audaque-table-title",{attrs:{title:"敏感识别报告"}},[e("div",{staticClass:"rewrite_icon"},[e("el-button",{staticClass:"color2f9aae",attrs:{type:"primary",icon:"iconshaixuan",size:"mini"},on:{click:function(e){t.isSearch=!t.isSearch}}},[t._v("筛选")])],1)])],1),e("template",{slot:"search"},[e("audaque-table-search",{directives:[{name:"show",rawName:"v-show",value:t.isSearch,expression:"isSearch"}],on:{close:function(e){t.isSearch=!1},search:function(e){return t.QUERYLIST_PARAMS(0)},reset:function(e){return t.QUERYLIST_PARAMS(1)}}},[e("audaque-table-search-item",{attrs:{title:"任务名"}},[e("el-input",{staticClass:"autoSize f14",attrs:{placeholder:"请输入任务名",maxlength:"50",clearable:""},model:{value:t.param.taskName,callback:function(e){t.$set(t.param,"taskName","string"==typeof e?e.trim():e)},expression:"param.taskName"}})],1),e("audaque-table-search-item",{attrs:{title:"数据库名"}},[e("el-input",{staticClass:"autoSize f14",attrs:{placeholder:"请输入数据库名",maxlength:"50",clearable:""},model:{value:t.param.dbName,callback:function(e){t.$set(t.param,"dbName","string"==typeof e?e.trim():e)},expression:"param.dbName"}})],1),e("audaque-table-search-item",{attrs:{title:"表名"}},[e("el-input",{staticClass:"autoSize f14",attrs:{placeholder:"请输入表名",maxlength:"50",clearable:""},model:{value:t.param.tableNameEn,callback:function(e){t.$set(t.param,"tableNameEn","string"==typeof e?e.trim():e)},expression:"param.tableNameEn"}})],1),e("audaque-table-search-item",{attrs:{title:"创建时间"}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeList,callback:function(e){t.timeList=e},expression:"timeList"}})],1)],1)],1),[e("el-table",{staticClass:"el-table-common__list",attrs:{"tooltip-effect":"light","highlight-current-row":"",stripe:"",data:t.sensitiveTaskInfoList.rows,border:""}},[e("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",label:"序号",index:function(e){return t.$utils._indexMethod(e,t.param.page,t.param.rows)},align:"center",width:"50"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"80",align:"center",prop:"taskName",label:"任务名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticStyle:{color:"#7099f9"},on:{click:function(e){return t.goView(a.row.id,a.row.status)}}},[t._v(t._s(a.row.taskName)+"\n                    ")])]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"80",align:"center",prop:"dbName",label:"数据库"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"80",align:"center",prop:"tableNameEn",label:"表名"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"80",align:"center",prop:"tableNameCn",label:"表中文名"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"80",align:"center",prop:"ruleCount",label:"敏感词设定数"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"latest",attrs:{type:"text",disabled:0===a.row.ruleCount},on:{click:function(e){return t.sensitiveDetail(a.row.id,a.row.taskName)}}},[t._v(t._s(a.row.ruleCount))])]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"80",align:"center",prop:"taskResult",label:"任务执行状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.getChangeType(e.row.taskResult)))]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"taskCreateTime",label:"任务创建时间"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"taskLatestStartTime",label:"任务最新执行时间"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"taskType",label:"识别报告"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticStyle:{color:"#7099f9"},on:{click:function(e){return t.getNew(a.row.newBatchNo)}}},[t._v("最新 ")]),e("a",{staticStyle:{color:"#7099f9"},on:{click:function(e){return t.getHisList(a.row.id)}}},[t._v(t._s("历史("+a.row.hisCount+")")+"\n                    ")])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"newoperate"},[12==i.row.excuteType?e("div",{on:{click:function(e){return t.taskStart(i.row.id,"stop")}}},[e("img",{attrs:{src:a("8cb9")}}),e("span",[t._v("停止")])]):t._e(),e("div",{on:{click:function(e){return t.delAllRecord(i.row.id)}}},[e("img",{attrs:{src:a("c106")}}),e("span",[t._v("删除所有报告")])])])]}}])}),e("template",{slot:"empty"},[e("audaque-table-empty",{attrs:{tableFetchStatus:t.$store.state.tableFetchStatus,"is-new":!1},on:{fetch:function(e){return t.LOGLIST(t.param)}}})],1)],2),e("adq-pagination",{attrs:{"current-page":t.param.page,total:t.sensitiveTaskInfoList.total,"page-size":t.param.rows},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],e("el-dialog",{attrs:{title:this.taskName+"任务设定敏感词列表",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[e("el-table",{attrs:{data:t.sensitiveData}},[e("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",label:"序号",index:function(e){return t.$utils._indexMethod(e,t.param.page,t.param.rows)},align:"center",width:"80"}}),e("el-table-column",{attrs:{align:"center",prop:"sensitiveName",label:"敏感词名称"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleType",label:"规则类型"},scopedSlots:t._u([{key:"default",fn:function(a){return[1===a.row.ruleType?e("span",[t._v("SQL规则")]):e("span",[t._v("正则规则")])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"ruleExpression",label:"规则表达式"}}),e("el-table-column",{attrs:{align:"center",prop:"sensitiveDesc",label:"规则描述"}})],1)],1),e("el-dialog",{attrs:{title:"任务历史报告",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[[e("el-table",{staticClass:"el-table-common__list",attrs:{"tooltip-effect":"light","highlight-current-row":"",stripe:"",data:t.taskHisList.rows,border:""}},[e("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",label:"序号",index:function(e){return t.$utils._indexMethod(e,t.paramHis.page,t.paramHis.rows)},align:"center",width:"50"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"taskStartTime",label:"执行开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t.publics.formatTime(e.row.taskStartTime,"Y-M-D h:m:s"))+"\n                    ")]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"taskEndTime",label:"执行结束时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t.publics.formatTime(e.row.taskEndTime,"Y-M-D h:m:s"))+"\n                    ")]}}])}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"taskResult",label:"执行状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticStyle:{color:"#7099f9"}},[t._v(t._s(null!=a.row.taskResult?0==a.row.taskResult?"执行中":1==a.row.taskResult?"成功":"失败":null)+"\n                        ")])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"operate"},[e("span",[e("a",{attrs:{title:"查看报告"},on:{click:function(e){return t.viewReport(a.row.batchNo)}}},[t._v("查看报告 ")])]),t._v("\n                             \n                            "),e("span",[e("a",{attrs:{title:"删除"},on:{click:function(e){return t.delHisRow(a.row.id)}}},[t._v("删除 ")])]),e("span",[e("a",{attrs:{title:"查看日志"},on:{click:function(e){return t.goViewHis(a.row.id)}}},[t._v("查看日志 ")])])])]}}])})],1),e("adq-pagination",{attrs:{"current-page":t.paramHis.page,total:t.taskHisList.total,"page-size":t.paramHis.rows},on:{"size-change":t.handleHisSizeChange,"current-change":t.handleHisCurrentChange}})],e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],2),e("el-dialog",{attrs:{title:"提示",visible:t.innerVisible,width:"30%"},on:{"update:visible":function(e){t.innerVisible=e}}},[t._v("\n        "+t._s(this.contents)+"\n    ")]),e("el-dialog",{attrs:{title:"任务引用规则列表",visible:t.dialogRuleVisible,width:"50%"},on:{"update:visible":function(e){t.dialogRuleVisible=e}}},[[e("el-table",{staticClass:"el-table-common__list",attrs:{"tooltip-effect":"light","highlight-current-row":"",stripe:"",data:t.senRuleList.rows,border:""}},[e("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",label:"序号",index:function(e){return t.$utils._indexMethod(e,t.paramRule.page,t.paramRule.rows)},align:"center",width:"50"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleName",label:"规则名称"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleType",label:"规则类型）"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleCategory",label:"规则分类"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"expression",label:"规则表达式"}}),e("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleDesc",label:"规则描述"}})],1),e("adq-pagination",{attrs:{"current-page":t.paramRule.page,total:t.senRuleList.total,"page-size":t.paramRule.rows},on:{"size-change":t.handleRuleSizeChange,"current-change":t.handleRuleCurrentChange}})],e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogRuleVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogRuleVisible=!1}}},[t._v("确 定")])],1)],2)],2)}),[],!1,null,"8fa4699e",null);e.default=c.exports},c106:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAABhklEQVRIie3Vv0tVcRjH8ZcpKZRQ0SaCLeEtKCqywUCXbDKEyMUh+w901DEaXFoLgkKnEF2F8MfQ4OKijU5BEEkUFxtCMku+8lw42L3ndq6BSx94eM73+z3P+/vrOc9p6h5/r4668QR30YZ3mMJ8XtCJOtBrWMN9nEYLbmAOk0cBT6Mdi7gdthxjj1FqBHwZV/AF97AaNoivaMZwreC0tUfoqzLWET6tePPQWHv4EVyoEruSLm83JviX2mmJS+jFdXSijA8FJzkZ572NdSxk0y1d1EPMYLQguAsJ9Bb9/iIrGlY98NnMOykLzsRz6juXF5gHvhWpNhXtV9jCRTzFZ9xsBFyK8Z5oX0UrLsUX2Ry5Xhh8JP0HHy/4V/jd8Hvhf4Zl+/5QXvFZwRKeR/sZhqJ0ngr4cq3gauBK30cMZPpfhiXNhtXkZI+iHL7mXyFHlZhP1WZ6g7EonxOxoso55+l85rNPv7ADZctmU8Cz2y+ijagvPw4fxW88wAt8K0D8jte4U4HCPsiBR1Kg9200AAAAAElFTkSuQmCC"},d206:function(t,e,a){"use strict";a("057c")}}]);