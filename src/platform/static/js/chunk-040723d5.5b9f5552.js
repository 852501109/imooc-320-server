(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-040723d5","chunk-f745e076"],{"1b629":function(e,t,i){"use strict";i("5c20")},"24a4":function(e,t,i){"use strict";i.r(t),i("7f7f"),i("8e6e"),i("ac6a"),i("456d"),i("6b54"),i("7514");var o=i("ade3"),a=i("2f62"),r=i("cce0");function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){Object(o.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var s={data:function(){return{placeholder:"请输入主键计算逻辑，比如FSELSE_.DIM.customer.borndate > 1995，输入ctrl + d可格式化",rowId:this.$route.query.id,filter:"view"!=this.$route.query.filter,statuslist:[{name:"关闭",id:"0"},{name:"开启",id:"1"}],tableData:[{cn:"哥哥哥",en:"ggg"},{cn:"哥哥哥",en:"ggg"}],logicList:[],logicColList:[],startOptions:[],endOptions:[],param:{id:"",domainId:this.$route.query.domainId||"",categoryId:this.$route.query.categoryId||"",logicTabId:"",logicColId:"",limitName:"",limitDesc:"",calcExpress:""},rules:{logicTabId:[{required:!0,message:"请选择逻辑表",trigger:"blur"}],logicColId:[{required:!0,message:"请选择逻辑表字段",trigger:"blur"}],limitName:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},computed:{},methods:l(l({},Object(a.b)("develop",["QUERY_DAP_SUM_SCCLIMIT_DEF_DETAIL","UPDATE_DAP_SUM_SCCLIMIT_DEF","INSERT_DAP_SUM_SCCLIMIT_DEF","GET_DAP_SUM_SCCLIMIT_DEF_DOMAIN","GET_DAP_SUM_SCCLIMIT_DEF_LOGIC","GET_DAP_SUM_SCCLIMIT_DEF_LOGIC_COL"])),{},{changeTextarea:function(e){this.$set(this.param,"calcExpress",e)},changeLogic:function(e){var t=this;this.param.logicColId="",this.GET_DAP_SUM_SCCLIMIT_DEF_LOGIC_COL({tabId:e}).then((function(e){t.logicColList=e}))},changeColName:function(){this.initExp()},initExp:function(){var e=this;if(""===this.param.calcExpress&&this.param.logicTabId&&this.param.logicColId){var t=this.logicList.find((function(t){return t.code===e.param.logicTabId})).name,i=this.logicColList.find((function(t){return t.code===e.param.logicColId})).name;this.$refs.sqleditor.editor.setValue("select ".concat(i," from ").concat(t))}},indicatorsSubmit:function(){},indicatorsClose:function(){this.indicatorsAsync=!1},validateExpress:function(e,t,i){this.param.beginExpressFuc?this.param.beginExpress?this.param.endExpressFuc?this.param.endExpress?i():i(new Error("请选择结束时间函数表达式")):i(new Error("请选择结束时间函数表达式函数")):i(new Error("请输入开始时间函数表达式")):i(new Error("请选择开始时间函数表达式函数"))},subBtn:function(){var e=this,t=this;this.$refs.subForm.validate((function(i){if(!i)return!1;if(e.$store.commit("SHOW_LOADING",!0),e.rowId){var o=Object.assign({},e.param);o.calcExpress=encodeURI(o.calcExpress),e.UPDATE_DAP_SUM_SCCLIMIT_DEF(o).then((function(i){0==i.code&&e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}else{var a=e.param;a.calcExpress=encodeURI(a.calcExpress),e.INSERT_DAP_SUM_SCCLIMIT_DEF(a).then((function(i){0==i.code&&e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}}))}}),components:{SqlEditor:r.default},mounted:function(){},created:function(){var e=this;this.rowId?this.QUERY_DAP_SUM_SCCLIMIT_DEF_DETAIL({id:this.rowId}).then((function(t){e.param={id:t.id,domainId:t.domainId,categoryId:t.categoryId,logicTabId:t.logicTabId.toString(),logicColId:t.logicColId.toString(),limitName:t.limitName,limitDesc:t.limitDesc,calcExpress:t.calcExpress},e.$refs.sqleditor.editor.setValue(t.calcExpress),e.GET_DAP_SUM_SCCLIMIT_DEF_LOGIC({domainId:t.domainId}).then((function(t){e.logicList=t})),e.GET_DAP_SUM_SCCLIMIT_DEF_LOGIC_COL({tabId:t.logicTabId}).then((function(t){e.logicColList=t}))})):this.GET_DAP_SUM_SCCLIMIT_DEF_LOGIC({domainId:this.$route.query.domainId}).then((function(t){e.logicList=t}))}},c=(i("1b629"),i("2877")),d=Object(c.a)(s,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{attrs:{title:e.filter?e.rowId?"业务限定词编辑":"业务限定词新增":"业务限定词查看","opt-type":e.$route.query.filter},on:{"submit-click":e.subBtn}},[[t("el-form",{ref:"subForm",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:!e.filter}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"逻辑表",prop:"logicTabId",rules:e.rules.logicTabId}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeLogic},model:{value:e.param.logicTabId,callback:function(t){e.$set(e.param,"logicTabId",t)},expression:"param.logicTabId"}},e._l(e.logicList,(function(e){return t("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"逻辑表字段",prop:"logicColId",rules:e.rules.logicColId}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeColName},model:{value:e.param.logicColId,callback:function(t){e.$set(e.param,"logicColId",t)},expression:"param.logicColId"}},e._l(e.logicColList,(function(e){return t("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"名称",prop:"limitName",rules:e.rules.limitName}},[t("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入名称","show-word-limit":""},model:{value:e.param.limitName,callback:function(t){e.$set(e.param,"limitName","string"==typeof t?t.trim():t)},expression:"param.limitName"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"limitDesc",rules:e.rules.limitDesc}},[t("el-input",{attrs:{disabled:!e.filter,type:"textarea",placeholder:"请输入","show-word-limit":""},model:{value:e.param.limitDesc,callback:function(t){e.$set(e.param,"limitDesc","string"==typeof t?t.trim():t)},expression:"param.limitDesc"}})],1),t("el-form-item",{attrs:{label:"计算逻辑",prop:"calcExpress",rules:e.rules.calcExpress}},[t("SqlEditor",{ref:"sqleditor",attrs:{value:e.param.calcExpress,placeholder:e.placeholder},on:{changeTextarea:function(t){return e.changeTextarea(t)}}})],1)],1)],1)],1)]],2)}),[],!1,null,"65e8535a",null);t.default=d.exports},"4a53":function(e,t,i){(e.exports=i("2350")(!1)).push([e.i,"[data-v-1011759a] .CodeMirror{color:#000;direction:ltr;line-height:22px;border:1px solid #e7e7e7}.CodeMirror-hints[data-v-1011759a]{z-index:9999!important}[data-v-1011759a] .CodeMirror pre.CodeMirror-placeholder{color:#929292;font-size:15px}",""])},"5c20":function(e,t,i){var o=i("963e");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,i("499e").default)("2d8bcf47",o,!0,{sourceMap:!1,shadowMode:!1})},"60dc":function(e,t,i){var o=i("4a53");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,i("499e").default)("7afc4878",o,!0,{sourceMap:!1,shadowMode:!1})},"963e":function(e,t,i){(e.exports=i("2350")(!1)).push([e.i,".get-edit-item[data-v-65e8535a]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-65e8535a]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-65e8535a]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-65e8535a]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-65e8535a]{width:100%;border:1px solid #dcdfe6;padding:24px}.row[data-v-65e8535a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.row>div[data-v-65e8535a]{margin-right:10px}",""])},"9bea":function(e,t,i){"use strict";i("60dc")},b866:function(e,t,i){var o=i("d131");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,i("499e").default)("3875f97e",o,!0,{sourceMap:!1,shadowMode:!1})},cce0:function(e,t,i){"use strict";i.r(t),i("b866"),i("a7be"),i("f6b6"),i("d7d5");var o=i("db05"),a=i.n(o),r=i("56b3");i("8c33"),i("31c5"),i("ffda"),i("9b74"),i("991c");var n={data:function(){return{editor:null}},props:{value:{type:String,default:""},sqlStyle:{type:String,default:"default"},readOnly:{type:[Boolean,String]},placeholder:{type:String,default:""}},watch:{newVal:function(e,t){this.editor&&this.$emit("changeTextarea",this.editor.getValue())}},computed:{newVal:function(){if(this.editor)return this.editor.getValue()},isView:function(){return"view"===this.$route.query.filter}},mounted:function(){this.initCodeMirror()},methods:{formaterSql:function(){this.editor.setValue(a.a.format(this.editor.getValue()))},initCodeMirror:function(){var e=this,t=this;this.editor=r.fromTextArea(this.$refs.mycode,{value:this.value,mode:"text/x-mariadb",indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,cursorHeight:1,lineWrapping:!0,readOnly:this.isView,theme:"idea",autofocus:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{completeSingle:!1},gutters:["myGutter","CodeMirror-linenumbers"],gutterWidth:40}),this.editor.on("inputRead",(function(){e.editor.showHint()})),this.editor.setOption("extraKeys",{"Ctrl-D":function(e){t.formaterSql()}})},setVal:function(){this.editor&&(""===this.value?this.editor.setValue(""):this.editor.setValue(this.value))}}},l=(i("9bea"),i("2877")),s=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{border:"1px solid #409eff"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"mycode",staticClass:"codesql",attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])}),[],!1,null,"1011759a",null);t.default=s.exports},d131:function(e,t,i){(e.exports=i("2350")(!1)).push([e.i,".cm-s-idea span.cm-meta{color:olive}.cm-s-idea span.cm-number{color:#00f}.cm-s-idea span.cm-keyword{line-height:1em;font-weight:700;color:navy}.cm-s-idea span.cm-atom{font-weight:700;color:navy}.cm-s-idea span.cm-def,.cm-s-idea span.cm-operator,.cm-s-idea span.cm-property,.cm-s-idea span.cm-type,.cm-s-idea span.cm-variable,.cm-s-idea span.cm-variable-2,.cm-s-idea span.cm-variable-3{color:#000}.cm-s-idea span.cm-comment{color:grey}.cm-s-idea span.cm-string,.cm-s-idea span.cm-string-2{color:green}.cm-s-idea span.cm-qualifier{color:#555}.cm-s-idea span.cm-error{color:red}.cm-s-idea span.cm-attribute{color:#00f}.cm-s-idea span.cm-tag{color:navy}.cm-s-idea span.cm-link{color:#00f}.cm-s-idea .CodeMirror-activeline-background{background:#fffae3}.cm-s-idea span.cm-builtin{color:#30a}.cm-s-idea span.cm-bracket{color:#cc7}.cm-s-idea{font-family:Consolas,Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif}.cm-s-idea .CodeMirror-matchingbracket{outline:1px solid grey;color:#000!important}.CodeMirror-hints.idea{font-family:Menlo,Monaco,Consolas,Courier New,monospace;color:#616569;background-color:#ebf3fd!important}.CodeMirror-hints.idea .CodeMirror-hint-active{background-color:#a2b8c9!important;color:#5c6065!important}",""])},d7d5:function(e,t,i){!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){t(e);var i=e.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.style.direction=e.getOption("direction"),i.className="CodeMirror-placeholder CodeMirror-line-like";var o=e.getOption("placeholder");"string"==typeof o&&(o=document.createTextNode(o)),i.appendChild(o),e.display.lineSpace.insertBefore(i,e.display.lineSpace.firstChild)}function o(e){r(e)&&i(e)}function a(e){var o=e.getWrapperElement(),a=r(e);o.className=o.className.replace(" CodeMirror-empty","")+(a?" CodeMirror-empty":""),a?i(e):t(e)}function r(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(r,n,l){var s=l&&l!=e.Init;if(n&&!s)r.on("blur",o),r.on("change",a),r.on("swapDoc",a),e.on(r.getInputField(),"compositionupdate",r.state.placeholderCompose=function(){!function(e){setTimeout((function(){var o=!1;if(1==e.lineCount()){var a=e.getInputField();o="TEXTAREA"==a.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(a.querySelector(".CodeMirror-line").textContent)}o?i(e):t(e)}),20)}(r)}),a(r);else if(!n&&s){r.off("blur",o),r.off("change",a),r.off("swapDoc",a),e.off(r.getInputField(),"compositionupdate",r.state.placeholderCompose),t(r);var c=r.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}n&&!r.hasFocus()&&o(r)}))}(i("56b3"))}}]);