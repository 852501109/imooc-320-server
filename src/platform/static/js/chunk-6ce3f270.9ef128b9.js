(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6ce3f270","chunk-266502c5","chunk-2d0d43f6"],{2696:function(e,t,o){"use strict";o.r(t),o("ac6a"),o("456d"),o("8e6e");var r=o("ade3"),a=o("2f62"),n=o("e91a"),s=o("365c"),i=o("5fe4"),l=o("1971"),c=o("0314");function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){Object(r.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var u={data:function(){return{bizCode:this.$route.query.bizCode,formId:this.$route.query.formId,tableName:this.$route.query.tableName,optType:this.$route.query.optType,nodeData:[],activeNodeData:{},activeNodeVariables:{},operationData:[],key2:+new Date,formConf:{},activeName:"0",userInfoForm:{},userInfoRules:{},statusNS:i.status,isShowFormItem:!0,tabsNames:{0:"基本信息",1:"表单信息",2:"审核历史"}}},computed:{},components:{processInfoComponent:n.default},created:function(){this.init()},methods:p(p({},Object(a.b)(["_AJAX"])),{},{init:function(){var e=this;if(!this.formId)return this.isShowFormItem=!1,this.loadUserInfo(),!1;this.isShowFormItem=!0;var t=s.default["form.design.select"]+"/"+this.formId;this._AJAX({url:t,method:"GET",data:{}}).then((function(t){e.formConf=JSON.parse(t.result.formJson)})),this.loadUserInfo()},loadUserInfo:function(){var e=this;this._AJAX({url:window.urlConfig+"/activiti/biz/select/".concat(this.bizCode),method:"GET",data:{}}).then((function(t){0===t.code&&(e.userInfoForm=t.result,e.userInfoForm.ccInfo?e.userInfoForm.ccInfo=e.userInfoForm.ccInfo.map((function(e){return e.username})):e.userInfoForm.ccInfo=[],t.result.dataMapStr&&(l.fillFormData.call(e,e.formConf.fields,JSON.parse(t.result.dataMapStr),e.formConf),e.key2=+new Date))}))},handleDown:function(){c.default.loadNode(document.querySelector("#updateNode"+this.activeName),this.userInfoForm.title+"_"+this.tabsNames[this.activeName])}})},d=(o("dcf7"),o("2877")),m=Object(d.a)(u,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{staticClass:"workflow-review-edit",attrs:{title:"查看我的工单","opt-type":e.$route.query.optType}},[t("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[t("el-form",{ref:"userInfoForm",attrs:{model:e.userInfoForm,rules:e.userInfoRules,id:"updateNode0","label-width":"110px"}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"流程类型",prop:"categoryName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.categoryName,callback:function(t){e.$set(e.userInfoForm,"categoryName","string"==typeof t?t.trim():t)},expression:"userInfoForm.categoryName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"流程名称",prop:"processName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.processName,callback:function(t){e.$set(e.userInfoForm,"processName","string"==typeof t?t.trim():t)},expression:"userInfoForm.processName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"申请标题",prop:"title"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.title,callback:function(t){e.$set(e.userInfoForm,"title","string"==typeof t?t.trim():t)},expression:"userInfoForm.title"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"申请时间",prop:"applyTime"}},[t("div",{staticClass:"form-border"},[e._v("\n                            "+e._s(e.publics.formatTime(e.userInfoForm.applyTime,"Y-M-D h:m:s"))+"\n                        ")])])],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"已流转(天)",prop:"workTime"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.workTime,callback:function(t){e.$set(e.userInfoForm,"workTime","string"==typeof t?t.trim():t)},expression:"userInfoForm.workTime"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("div",{staticClass:"form-border"},[e._v(e._s(e.statusNS[e.userInfoForm.status]))])])],1),t("el-col",{attrs:{span:12}},[e.userInfoForm.ccInfo&&e.userInfoForm.ccInfo.length>0?t("el-form-item",{attrs:{label:"抄送人",prop:"ccInfo"}},[t("div",{staticClass:"form-border"},[e._v("\n                            "+e._s(e.userInfoForm.ccInfo.join(","))+"\n                            ")])]):e._e()],1)],1)],1),t("el-tab-pane",{attrs:{label:"表单信息",name:"1"}},[e.isShowFormItem?[Object.keys(e.formConf).length>0?t("form-parser",{key:e.key2,ref:"formParser",attrs:{id:"updateNode1",formConf:e.formConf,isDisabled:!0}}):e._e()]:t("div",{staticClass:"air-item"},[e._v("暂无表单信息!")])],2),t("el-tab-pane",{attrs:{label:"审核历史",name:"2"}},["2"===e.activeName?t("process-info-component",{attrs:{id:"updateNode2",procInstId:e.userInfoForm.procInstId,procDefId:e.userInfoForm.procDefId}}):e._e()],1)],1)],1)}),[],!1,null,"bc1c5e7a",null);t.default=m.exports},"2bf4":function(e,t,o){"use strict";o("fdf5")},"5fe4":function(e,t,o){"use strict";o.r(t),o.d(t,"status",(function(){return r})),o.d(t,"reviewStatus",(function(){return a})),t.default={1:{tableName:"oa_leave_bill",type:"请假审核"},2:{tableName:"oa_finance",type:"财务审核"},3:{tableName:"sys_category",type:"流程启用审核"}};var r={0:"草稿",1:"处理中",2:"结束"},a=[{label:"待提交",value:0},{label:"处理中",value:1},{label:"通过",value:2},{label:"驳回",value:3},{label:"撤回",value:4},{label:"不通过",value:5},{label:"终止",value:6}]},c327:function(e,t,o){var r=o("ed18");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,o("499e").default)("45d447ba",r,!0,{sourceMap:!1,shadowMode:!1})},dcf7:function(e,t,o){"use strict";o("c327")},e424:function(e,t,o){(e.exports=o("2350")(!1)).push([e.i,"",""])},e91a:function(e,t,o){"use strict";o.r(t),o("8e6e"),o("ac6a"),o("456d"),o("a481"),o("28a5");var r=o("ade3"),a=(o("365c"),o("2f62"));function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){Object(r.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var i={name:"processInfoComponent",data:function(){return{tableData:[],imgUrl:null,form:{page:1,rows:10,procInstId:null}}},props:["procInstId","procDefId"],watch:{procInstId:{handler:function(e){},deep:!0}},created:function(){this.procInstId?(this.getImg({procInstId:this.procInstId}),this.loadTableData()):this.getImg({procDefId:this.procDefId})},methods:s(s({},Object(a.b)(["_AJAX"])),{},{loadTableData:function(){var e=this,t=this.form;t.procInstId=this.procInstId,this._AJAX({url:"activiti.task.historic",method:"GET",data:t}).then((function(t){e.tableData=t.result}))},getImg:function(e){var t=this;this._AJAX({url:"activiti.models.img",method:"GET",responseType:"blob",data:e}).then((function(e){var o=new Blob([e]),r=window.URL.createObjectURL(o);t.imgUrl=r}))},markRed:function(e){if(!e)return"-";for(var t=e.split(","),o=0;o<t.length;o++){var r=t[o];if(/_\*$/.test(r)){var a=r.replace("_*","");t[o]='<span style="color:red;">'+a+"</span>"}}return t.join(",")},sizeChange:function(e){this.form.page=1,this.form.rows=e,this.loadTableData()},currentChange:function(e){this.form.page=e,this.loadTableData()}})},l=(o("2bf4"),o("2877")),c=Object(l.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"text-align":"center"}},[t("img",{staticStyle:{"min-height":"250px","margin-bottom":"20px","max-width":"100%"},attrs:{src:e.imgUrl}})]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,border:"","row-key":"id","tree-props":{children:"audits",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{type:"index",label:"序号",index:function(t){return e.$utils._indexMethod(t,e.form.page,e.form.rows)},width:"50"}}),t("el-table-column",{attrs:{prop:"name",label:"活动流程"}}),t("el-table-column",{attrs:{prop:"startTime",label:"接收时间"}}),t("el-table-column",{attrs:{prop:"endTime",label:"完成时间"}}),t("el-table-column",{attrs:{prop:"assignee","show-overflow-tooltip":"",label:"参与者"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{domProps:{innerHTML:e._s(e.$audaquePreventXss(e.markRed(o.row.assignee),e.$xssWhitelist))}})]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"comment",label:"审核意见"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"deleteReason",label:"审核"}})],1),t("adq-pagination",{attrs:{total:e.tableData.total,"page-size":e.form.rows,"current-page":e.form.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)}),[],!1,null,"32a383be",null);t.default=c.exports},ed18:function(e,t,o){(e.exports=o("2350")(!1)).push([e.i,"[data-v-bc1c5e7a] .el-tabs{height:100%!important}[data-v-bc1c5e7a] .el-tabs .el-tabs__content{height:100%;overflow:auto}[data-v-bc1c5e7a] .el-tabs .el-tab-pane{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}[data-v-bc1c5e7a] .el-tabs .el-tab-pane .operation-item{height:100%;text-align:left!important}[data-v-bc1c5e7a] .el-tabs .el-tab-pane .operation-item .el-form-item__label{padding:0;font-weight:600}[data-v-bc1c5e7a] .el-tabs .air-item{width:100%;height:200px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px;font-weight:700}.form-border[data-v-bc1c5e7a]{background-color:#f5f7fa;color:#c0c4cc;padding:5px 15px;border:1px solid #dcdfe6;border-radius:4px;word-break:break-all;line-height:25px}[data-v-bc1c5e7a] #copyFormNode .el-textarea,[data-v-bc1c5e7a] #copyFormNode .tinymce-editor{border:1px solid #ccc;padding:10px}[data-v-bc1c5e7a] .download-title{text-align:center;font-size:18px;font-weight:700;padding:0 0 15px 0;margin-bottom:10px;border-bottom:1px solid #e0e0e0}",""])},fdf5:function(e,t,o){var r=o("e424");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,o("499e").default)("c5c68e98",r,!0,{sourceMap:!1,shadowMode:!1})}}]);