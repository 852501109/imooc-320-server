(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1c1ce37e"],{"38cf":function(e,t,a){"use strict";a("8540")},"7c3b":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".get-edit-item[data-v-3022847b]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-3022847b]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-3022847b]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-3022847b]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-3022847b]{width:100%;border:1px solid #dcdfe6;padding:24px}[data-v-3022847b] .el-table__body-wrapper,[data-v-3022847b] .el-table__header-wrapper{border-left:1px solid #eee;border-right:1px solid #eee}[data-v-3022847b] .el-table__header-wrapper{border-top:1px solid #eee}",""])},8540:function(e,t,a){var r=a("7c3b");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,a("499e").default)("cde1dbd4",r,!0,{sourceMap:!1,shadowMode:!1})},9261:function(e,t,a){"use strict";a.r(t),a("7f7f"),a("8e6e"),a("ac6a"),a("456d"),a("28a5");var r=a("ade3"),s=a("2f62");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var n={data:function(){return{value:"",rowId:this.$route.query.id,filter:"view"!=this.$route.query.filter,param:{id:"",taskCode:"",taskName:"",taskResult:"",taskCreateTime:"",taskLatestStartTime:"",taskCat:"",taskType:"2",cron:"",status:0,excuteType:"",remark:"",createUser:"",createTime:"",updateUser:"",updateTime:""},cronPopover:!1,cron:"",rules:{taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],taskType:[{required:!0,message:"请选择任务类型",trigger:"select"}],cron:[{required:!0,message:"请输入cron表达式",trigger:"change"}],remark:[{required:!1,message:"请输入任务描述",trigger:"blur"}]}}},computed:i(i({},Object(s.d)("dataFusionTask",["taskTypeOptions","excuteTypeOptions"])),{},{cronCn:function(){var e=this.param.cron;if(null==e||""==e)return"";var t=e.split(" ");return-1!=t[1].indexOf("/")?"每隔"+t[1].split("/")[1]+"分钟":-1!=t[2].indexOf("/")?"每隔"+t[2].split("/")[1]+"小时第"+t[1]+"分钟":-1!=t[3].indexOf("/")?"每隔"+t[3].split("/")[1]+"天第"+t[2]+"时第"+t[1]+"分钟":""}}),methods:i(i({},Object(s.b)("dataFusionTask",["GOEDITDATAFUSIONTASK","MODIFYDATAFUSIONTASK","ADDDATAFUSIONTASK"])),{},{changeCron:function(e){"3"==this.param.taskType||"1"==this.param.taskType?(this.$message.warning("手动执行、实时任务不需要cron的表达式"),this.param.cron=""):this.param.cron=e},getIsCont:function(){"3"!=this.param.taskType&&"1"!=this.param.taskType||(this.param.cron="")},subBtn:function(){var e=this,t=this;this.$refs.dataFusionTaskForm.validate((function(a){if(!a)return!1;if(e.$store.commit("SHOW_LOADING",!0),e.rowId)e.param.id=e.rowId,e.MODIFYDATAFUSIONTASK(e.param).then((function(a){0==a.code&&e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){t.$router.go(-1)}}})}));else{var r=e.param;e.ADDDATAFUSIONTASK(r).then((function(a){0==a.code&&e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}}))}}),mounted:function(){},created:function(){var e=this;this.rowId&&this.GOEDITDATAFUSIONTASK({id:this.rowId}).then((function(t){e.param.id=t.id,e.param.taskCode=t.taskCode,e.param.taskName=t.taskName,e.param.taskResult=t.taskResult,e.param.taskCreateTime=t.taskCreateTime,e.param.taskLatestStartTime=t.taskLatestStartTime,e.param.taskCat=t.taskCat,e.param.taskType=t.taskType+"",e.param.cron=t.cron,e.param.status=t.status,e.param.excuteType=t.excuteType,e.param.remark=t.remark,e.param.createUser=t.createUser,e.param.createTime=t.createTime,e.param.updateUser=t.updateUser,e.param.updateTime=t.updateTime}))}},p=(a("38cf"),a("2877")),l=Object(p.a)(n,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{attrs:{title:e.filter?e.rowId?"任务信息表编辑":"任务信息表新增":"任务信息表查看","opt-type":e.$route.query.filter},on:{"submit-click":e.subBtn}},[[t("el-form",{ref:"dataFusionTaskForm",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:!e.filter}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"任务名称",prop:"taskName",rules:e.rules.taskName}},[t("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入任务名称",maxlength:"200","show-word-limit":""},model:{value:e.param.taskName,callback:function(t){e.$set(e.param,"taskName","string"==typeof t?t.trim():t)},expression:"param.taskName"}})],1),t("el-form-item",{attrs:{label:"任务类型",prop:"taskType",rules:e.rules.taskType}},[[1!=e.param.taskType&&e.$route.query.filter?t("div",[t("el-radio-group",{attrs:{disabled:"view"==e.$route.query.filter},on:{change:e.getIsCont},model:{value:e.param.taskType,callback:function(t){e.$set(e.param,"taskType","string"==typeof t?t.trim():t)},expression:"param.taskType"}},e._l(e.taskTypeOptions,(function(a,r){return"实时任务"!=a.name?t("el-radio",{key:r,attrs:{label:a.code}},[e._v(e._s(a.name))]):e._e()})),1)],1):t("div",[t("el-radio-group",{attrs:{disabled:"view"==e.$route.query.filter||"edit"==e.$route.query.filter},on:{change:e.getIsCont},model:{value:e.param.taskType,callback:function(t){e.$set(e.param,"taskType","string"==typeof t?t.trim():t)},expression:"param.taskType"}},e._l(e.taskTypeOptions,(function(a,r){return t("el-radio",{key:r,attrs:{label:a.code}},[e._v(e._s(a.name))])})),1)],1)]],2),2==e.param.taskType?t("el-form-item",{attrs:{label:"调度计划",prop:"cron",rules:e.rules.cron}},[t("el-input",{attrs:{readonly:"",placeholder:"请输入cron表达式",maxlength:"200","show-word-limit":""},on:{focus:function(t){e.cronPopover=!0}},model:{value:e.param.cron,callback:function(t){e.$set(e.param,"cron","string"==typeof t?t.trim():t)},expression:"param.cron"}})],1):e._e(),2==e.param.taskType?t("el-form-item",{attrs:{label:"调度计划描述"}},[t("el-input",{attrs:{disabled:"",value:e.cronCn,maxlength:"200","show-word-limit":""}})],1):e._e(),t("el-form-item",{attrs:{label:"任务描述",prop:"remark",rules:e.rules.remark}},[t("el-input",{attrs:{type:"textarea",autosize:"",disabled:!e.filter,placeholder:"请输入任务描述",maxlength:"200","show-word-limit":""},model:{value:e.param.remark,callback:function(t){e.$set(e.param,"remark","string"==typeof t?t.trim():t)},expression:"param.remark"}})],1)],1)],1)],1)],e.cronPopover?t("new-cron",{attrs:{cronPopover:e.cronPopover,defaultVal:e.param.cron},on:{close:function(t){e.cronPopover=!1},change:e.changeCron}}):e._e()],2)}),[],!1,null,"3022847b",null);t.default=l.exports}}]);