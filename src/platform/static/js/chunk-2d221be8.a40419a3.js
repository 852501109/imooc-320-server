(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d221be8"],{cc3e:function(e,t,r){"use strict";r.r(t),r("8e6e"),r("456d"),r("ac6a"),r("7f7f"),r("28a5"),r("6762");var l=r("ade3"),i=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a={created:function(){var e=this;this.token=sessionStorage.getItem("token");var t=this.$route.query.id;t&&this.APPDETAIL(t).then((function(t){var r=t.result.myApp;e.ruleForm=r}))},computed:s({},Object(i.d)(["upload"])),data:function(){return{small:!1,large:!1,imgVisible:!1,preview:"",smallIconFile:[],largeIconFile:[],ruleForm:{appType:1,appKey:"",appName:"",contextUrl:"",loginUrl:"",mainUrl:"",smallIcon:"",largeIcon:""},rules:{appType:{required:!0,message:"请指定应用KEY",trigger:"change"},appKey:[{required:!0,message:"请指定应用KEY",trigger:"blur"}],appName:[{required:!0,message:"请输入应用名称",trigger:"blur"},{min:2,max:30,message:"应用名称长度为2-30个字符",trigger:"blur"}],contextUrl:[{required:!0,message:"请输入服务上下文URL",trigger:"blur"},{max:200,message:"URL最多200个字符",trigger:"blur"}],loginUrl:[{required:!0,message:"请输入登录URL",trigger:"blur"},{max:200,message:"URL最多200个字符",trigger:"blur"}],mainUrl:[{required:!0,message:"请输入主页URL",trigger:"blur"},{max:200,message:"URL最多200个字符",trigger:"blur"}]},token:null,fileList:[]}},methods:s(s(s({},Object(i.b)(["LOADIMG","LOADFILE"])),Object(i.b)("webkit",["MODIFYAPP","ADDAPP","APPDETAIL"])),{},{getImg:function(e){var t=this,r=e.target,l=r.naturalWidth,i=r.naturalHeight;if(r.className.indexOf("small")>-1){if(l>130||i>131)return this.$message({type:"warning",message:"该图片尺寸超出小图标显示大小,请控制在 150 x 121像素内",showClose:!0}),setTimeout((function(){t.smallIconFile=[]}),500)}else if(l>170||i>170)return this.$message({type:"warning",message:"该图片尺寸超出大图标显示大小,请控制在 170 x 170像素内",showClose:!0}),this.handleRemove({url:r.src},"largeIcon"),setTimeout((function(){t.largeIconFile=[]}),500)},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.$store.commit("SHOW_LOADING",!0);var r=e,l=Object.assign({},e.ruleForm);2==l.appType&&e.$delete(l,"appKey"),e.$route.query.id?e.MODIFYAPP(l).then((function(t){e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){r.$router.go(-1)}}})})):e.ADDAPP(l).then((function(t){e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){r.$router.go(-1)}}})}))}))},handlePictureCardPreview:function(e){this.preview=e.url,this.imgVisible=!0},beforeAvatarUpload:function(e){var t=["jpg","png","gif"],r=!0;return e.size/1024>500?(this.$AudaqueToast.error({template:"上传图片大小必须小于500K",methods:{okEvent:function(){}}}),!1):(t.includes(e.name.split(".")[1])||(this.$AudaqueToast.error({template:"上传格式必须是."+t.join(","),methods:{okEvent:function(){}}}),r=!1),r)},handleSuccess:function(e,t,r){this[r+"File"]=t,this.ruleForm[r]=e.result},handleRemove:function(e,t){var r=this;this.ruleForm[t]="",this[t+"File"].forEach((function(l,i){(l.url||l.response.result)==(e.url||e.response.result)&&r[t+"File"].splice(i,1)}))}})},n=r("2877"),u=Object(n.a)(a,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{attrs:{title:e.$route.query.id?"编辑应用":"新增应用","opt-type":e.$route.query.filter},on:{"submit-click":e.submitForm}},[t("el-form",{ref:"ruleForm",staticClass:"source-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"120px"}},[t("el-form-item",{staticClass:"source-list",attrs:{label:"应用类型",prop:"type"}},[t("el-radio-group",{attrs:{disabled:!!e.$route.query.id},model:{value:e.ruleForm.appType,callback:function(t){e.$set(e.ruleForm,"appType",t)},expression:"ruleForm.appType"}},[t("el-radio",{attrs:{label:1}},[e._v("内部应用")]),t("el-radio",{attrs:{label:2}},[e._v("外部应用")])],1)],1),1==e.ruleForm.appType?t("el-form-item",{staticClass:"source-list",attrs:{label:"应用KEY",prop:"appKey"}},[t("el-input",{attrs:{disabled:!!e.$route.query.id,maxlength:"24","show-word-limit":""},model:{value:e.ruleForm.appKey,callback:function(t){e.$set(e.ruleForm,"appKey","string"==typeof t?t.trim():t)},expression:"ruleForm.appKey"}})],1):e._e(),e.$route.query.id&&2==e.ruleForm.appType?t("el-form-item",{staticClass:"source-list",attrs:{label:"APPKEY",prop:"appKey"}},[t("el-input",{attrs:{disabled:!!e.$route.query.id},model:{value:e.ruleForm.appKey,callback:function(t){e.$set(e.ruleForm,"appKey","string"==typeof t?t.trim():t)},expression:"ruleForm.appKey"}})],1):e._e(),e.$route.query.id&&2==e.ruleForm.appType?t("el-form-item",{staticClass:"source-list",attrs:{label:"APPSECRET",prop:"clientSecret"}},[t("el-input",{attrs:{disabled:!!e.$route.query.id},model:{value:e.ruleForm.clientSecret,callback:function(t){e.$set(e.ruleForm,"clientSecret","string"==typeof t?t.trim():t)},expression:"ruleForm.clientSecret"}})],1):e._e(),t("el-form-item",{staticClass:"source-list",attrs:{label:"应用名称",prop:"appName"}},[t("el-input",{model:{value:e.ruleForm.appName,callback:function(t){e.$set(e.ruleForm,"appName","string"==typeof t?t.trim():t)},expression:"ruleForm.appName"}})],1),t("el-form-item",{staticClass:"source-list",attrs:{label:"服务上下文URL",prop:"contextUrl"}},[t("el-input",{model:{value:e.ruleForm.contextUrl,callback:function(t){e.$set(e.ruleForm,"contextUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.contextUrl"}})],1),t("el-form-item",{staticClass:"source-list",attrs:{label:"登录URL",prop:"loginUrl"}},[t("el-input",{model:{value:e.ruleForm.loginUrl,callback:function(t){e.$set(e.ruleForm,"loginUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.loginUrl"}})],1),t("el-form-item",{staticClass:"source-list",attrs:{label:"主页URL",prop:"mainUrl"}},[t("el-input",{model:{value:e.ruleForm.mainUrl,callback:function(t){e.$set(e.ruleForm,"mainUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.mainUrl"}})],1)],1),t("template",{slot:"bottom"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),e.permitList.modifyApp?t("el-button",{attrs:{type:"primary",loading:e.isSHowButtonLoading},on:{click:e.submitForm}},[e._v("提交")]):e._e()],1),t("el-dialog",{attrs:{visible:e.imgVisible,width:"300px"},on:{"update:visible":function(t){e.imgVisible=t}}},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[t("img",{attrs:{src:e.preview}})])])],2)}),[],!1,null,null,null);t.default=u.exports}}]);