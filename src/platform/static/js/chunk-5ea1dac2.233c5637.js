(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ea1dac2"],{"63bc":function(e,t,a){var r=a("ec51");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,a("499e").default)("5abc7208",r,!0,{sourceMap:!1,shadowMode:!1})},"952a":function(e,t,a){"use strict";a("63bc")},"9bf4":function(e,t,a){"use strict";a.r(t),a("8e6e"),a("ac6a"),a("456d"),a("96cf");var r=a("1da1"),l=(a("a481"),a("7514"),a("ade3")),i=(a("c5f6"),a("2f62"));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s,c,d={props:{rowId:{type:Number,default:0},row:{type:Object,dafault:function(){}}},data:function(){return{value:"",filter:"view"!=this.$route.query.filter,layerSelectShow:!0,layerList:[],desLayerList:[],datas:[],defaultProps:{label:"name",children:"children",multipleSelection:[],multipleSelection1:[]},treeExpandData:[],deptlist:[],param:{tableName:"",layerCode:"",targetLevelCode:[]},rules:{targetLevelCode:[{required:!0,message:"请选择",trigger:"blur"}],tableName:[{required:!0,message:"请输入",trigger:"change"}]}}},computed:{},methods:n(n(n(n({},Object(i.b)("collectionLayer",["COLLECTIONLAYERLIST","DELETECOLLECTIONLAYERLIST","DELETECOLLECTIONLAYERLIST","MODIFYCOLLECTIONLAYERLIST","GET_ALLMODELLAYER","GET_MODELALLLEVELS","COPY_TABLE_SUBMIT","GET_TREE"])),Object(i.b)("resourcecatalog",["RESOURCECATALOGLIST","RESOURCECATALOGTREE","GETDEPTLIST","GETCOLUMNBYTABLEID","GETDATASOURLIST","DETSYSTEMDETAILBYID","MODIFYMODELSYSTEMINFO","ADDMODELSYSTEMINFO","DELETEMODELSYSTEMINFO","GETTABLEBYDATASOURCEID","IMPROTDATATABLEBYSYSTEMID","MODIFYUPDATEFREQUENCY","GETTABLEDATABYTABLEID","GETSYSTEMBYDATASOURCEID","DIRECTORYMIGRATION"])),Object(i.b)(["_AJAX"])),{},{removePrefix:function(e){var t=this.layerList.find((function(e){return"au_ods"==e.levelCode}));return 0===e.indexOf(t.tablePrefix)?e.replace(t.tablePrefix,""):""},getTree:function(){var e=this;this.GET_TREE({layerCode:this.param.layerCode}).then((function(t){e.treeExpandData=t}))},cancel:function(){this.$emit("close")},subButton:function(){var e=this;this.$refs.collectionLayer.validate((function(t){if(t){e.$store.commit("SHOW_LOADING",!0);var a={sourceTableId:Number(e.rowId),targetLevelCode:e.param.layerCode,newTableName:e.param.tablePrefix+e.param.tableName,categoryId:Number(e.param.targetLevelCode[e.param.targetLevelCode.length-1])};e.COPY_TABLE_SUBMIT(a).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"复制成功",methods:{okEvent:function(){e.$emit("close")}}})}))}}))},getdeptlist:function(){var e=this;return new Promise((function(t){e.GETDEPTLIST().then((function(a){e.deptlist=a,t(a)}))}))},handleNodeClick:(c=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getdeptlist();case 2:a=this.deptlist.length,this.param.holdId=t.holdId,this.holdId=t.holdId,this.param.id=t.id,this.threeid=t.id,this.isedits=!0,t.id>a?this.isdataiprot=!0:this.isdataiprot=!1,this.multipleSelection=[],this.multipleSelection1=[],this.initData();case 12:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)}),initData:function(){var e=this.param;this.RESOURCECATALOGLIST(e)},getModelAllLevels:(s=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GET_MODELALLLEVELS().then((function(e){t.layerList=e,t.desLayerList=e.filter((function(e){return"au_ods"!=e.levelCode&&"au_std"!=e.levelCode})),t.param.tableName=t.removePrefix(t.row.tableName)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),handleLayerCodeChange:function(e){var t=this;if(!e)return this.treeExpandData=[],void(this.param.targetLevelCode=[]);this.getTree();var a=this.layerList.find((function(e){return e.levelCode===t.param.layerCode}));this.param.tablePrefix=a?a.tablePrefix:""}}),mounted:function(){this.getModelAllLevels()}},u=(a("952a"),a("2877")),p=Object(u.a)(d,(function(){var e=this,t=e._self._c;return t("el-form",{ref:"collectionLayer",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:!e.filter}},[t("el-form-item",{attrs:{label:"原表名："}},[t("div",[e._v(e._s(e.row.tableName))])]),t("el-form-item",{attrs:{label:"复制表到：",prop:"targetLevelCode",rules:e.rules.targetLevelCode}},[t("div",{staticClass:"row"},[t("div",[t("el-select",{attrs:{disabled:!e.layerSelectShow,placeholder:"请选择要复制到哪一层",clearable:""},on:{change:e.handleLayerCodeChange},model:{value:e.param.layerCode,callback:function(t){e.$set(e.param,"layerCode",t)},expression:"param.layerCode"}},e._l(e.desLayerList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.levelName,value:e.levelCode}})})),1)],1),t("div",[t("el-cascader",{attrs:{options:e.treeExpandData,clearable:"",placeholder:"请选择类别",props:{value:"id",label:"name"}},model:{value:e.param.targetLevelCode,callback:function(t){e.$set(e.param,"targetLevelCode",t)},expression:"param.targetLevelCode"}})],1)])]),t("el-form-item",{attrs:{label:"目标表名：",prop:"tableName",rules:e.rules.tableName}},[t("el-input",{attrs:{placeholder:"请输入表名",maxlength:"200","show-word-limit":""},model:{value:e.param.tableName,callback:function(t){e.$set(e.param,"tableName","string"==typeof t?t.trim():t)},expression:"param.tableName"}},[t("template",{slot:"prepend"},[e._v(e._s(e.param.tablePrefix))])],2)],1),t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"flex-end"}},[t("el-button",{on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.subButton}},[e._v("确认")])],1)],1)}),[],!1,null,"6e7e87bb",null);t.default=p.exports},ec51:function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".row[data-v-6e7e87bb]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.row>div[data-v-6e7e87bb]{width:49.5%}.row>div[data-v-6e7e87bb]:first-child{margin-right:1%}.row[data-v-6e7e87bb] .el-cascader{width:100%}",""])}}]);