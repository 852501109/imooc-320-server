(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ae680068"],{"034d":function(e,t,r){var o=r("4a740");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),(0,r("499e").default)("e73443d0",o,!0,{sourceMap:!1,shadowMode:!1})},"4a740":function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".category-edit[data-v-729c48b9] .resource{border:1px solid #e1dfdc}.category-edit[data-v-729c48b9] .submit-wrap{text-align:center;margin-top:.2rem}.category-edit[data-v-729c48b9] .el-tree{height:3.5rem;overflow-y:scroll}.category-edit .paf-title[data-v-729c48b9]{cursor:pointer}.category-edit .agree[data-v-729c48b9]{color:red}.category-edit[data-v-729c48b9] .form-item{width:99%;padding-right:0}[data-v-729c48b9] .el-button--primary{background-color:#5394eb!important;border-color:#5394eb!important;color:#fff!important}.el-icon-question[data-v-729c48b9]{cursor:pointer}",""])},c683:function(e,t,r){"use strict";r.r(t),r("7f7f"),r("8e6e"),r("ac6a"),r("456d"),r("6b54"),r("c5f6"),r("96cf");var o=r("1da1"),a=r("ade3"),s=r("2f62"),l=r("e762");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p,c={data:function(){return{ruleCategoryList:[],successList:[],empty:!1,form:{ruleName:"",ruleType:"",ruleCategory:"",expression:"",ruleDesc:"",textInputValue:"",textResponseResult:"",createUserName:"",createTime:"",updateUserName:"",updateTime:""},rules:{ruleName:[{required:!0,message:"规则名称不能为空",trigger:"blur"}],ruleType:[{required:!0,message:"规则类型不能为空"}],ruleCategory:[{required:!0,message:"规则分类不能为空"}],expression:[{required:!0,message:"规则表达式不能为空",trigger:"blur"}],ruleDesc:[{required:!1,message:"规则描述不能为空",trigger:"blur"}]},operateName:"",optId:this.$route.query.id,optType:this.$route.query.optType,ruleType:this.$route.query.ruleType,userMaxLength:window.accountMaxLength,isCluster:window.isCluster}},computed:n({},Object(s.d)("generateRule",["ruleTypeOptions","ruleCategoryOptions"])),watch:{},created:function(){this.GETRULETYPEOPTIONS_LIST(),this.GETRULECATEGORYLIST(),this.form.ruleType=this.ruleType,(this.isCluster&&!this.optType||this.isCluster&&"add"===this.optType)&&(this.optType="view"),"view"===this.optType?"1"==this.ruleType?this.operateName="SQL规则查看":"2"==this.ruleType?this.operateName="正则规则查看":"3"==this.ruleType?this.operateName="值域规则查看":this.operateName="查看校验规则管理":"edit"===this.optType?"1"==this.ruleType?this.operateName="SQL规则修改":"2"==this.ruleType?this.operateName="正则规则修改":"3"==this.ruleType?this.operateName="值域规则修改":this.operateName="校验规则修改":this.isCluster||("1"==this.ruleType?this.operateName="SQL规则新增":"2"==this.ruleType?this.operateName="正则规则新增":"3"==this.ruleType?this.operateName="值域规则新增":this.operateName="校验规则新增"),"add"!==this.optType&&this.queryDetail()},methods:n(n({},Object(s.b)("generateRule",["GETRULETYPEOPTIONS_LIST","GOEDITGENERATERULE","MODIFYGENERATERULE","ADDGENERATERULE","GETRULECATEGORYLIST","CHECK"])),{},{check:function(){var e=this,t=Object(l.b)(this.form.expression);this.CHECK({expression:t,im:this.form.textInputValue,ruleType:this.form.ruleType}).then((function(t){2==e.form.ruleType?e.successList=t:e.successList=1==t[0]?[e.form.textInputValue]:[],0===e.successList.length?e.empty=!0:e.empty=!1}))},queryDetail:(p=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:Number(this.optId)},e.next=3,this.GOEDITGENERATERULE(t).then((function(e){r.form.ruleName=e.ruleName,r.form.ruleCategory=e.ruleCategory.toString(),r.form.expression=e.expression,r.form.ruleDesc=e.ruleDesc,r.form.dataState=e.dataState,r.form.createUser=e.createUser,r.form.createTime=e.createTime,r.form.updateUser=e.updateUser,r.form.updateTime=e.updateTime}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)}),submit:function(){var e=this,t=Object(l.b)(this.form.expression),r={ruleName:this.form.ruleName,ruleType:this.form.ruleType,expression:t,ruleCategory:this.form.ruleCategory,ruleDesc:this.form.ruleDesc};this.$refs.ruleform.validate((function(t){if(!t)return!1;var o=e;o.$store.commit("SHOW_LOADING",!0),"edit"===e.optType?(r.id=Number(e.optId),e.MODIFYGENERATERULE(r).then((function(){e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){o.$router.go(-1)}}})})).catch((function(){return e.loading=!1}))):e.ADDGENERATERULE(r).then((function(){e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){o.$router.go(-1)}}})})).catch((function(){return e.loading=!1}))}))}})},u=(r("ef19"),r("2877")),m=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{staticClass:"category-edit",attrs:{title:e.operateName,"opt-type":e.optType},on:{"submit-click":e.submit}},[[t("el-form",{ref:"ruleform",staticClass:"form-item",attrs:{model:e.form,"label-width":"120px",rules:e.rules,disabled:"view"===e.optType}},[t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:50,"show-word-limit":""},model:{value:e.form.ruleName,callback:function(t){e.$set(e.form,"ruleName","string"==typeof t?t.trim():t)},expression:"form.ruleName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{prop:"ruleType"}},[t("template",{slot:"label"},[e._v("规则类型\n                            "),t("el-popover",{attrs:{placement:"right",width:"200",trigger:"hover","popper-class":"popover",content:1==e.form.ruleType?"此规则为正向规则，符合规则的为问题数据":2==e.form.ruleType||3==e.form.ruleType?"此规则类型为反向规则，符合规则的为正常数据":""}},[t("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),t("el-select",{attrs:{disabled:"",placeholder:"请选择",clearable:""},model:{value:e.form.ruleType,callback:function(t){e.$set(e.form,"ruleType",t)},expression:"form.ruleType"}},e._l(e.ruleTypeOptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],2)],1)],1),t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{prop:"ruleCategory"}},[t("template",{slot:"label"},[e._v("规则分类\n                            "),t("el-popover",{attrs:{placement:"right",trigger:"hover","popper-class":"popover",content:""}},[[t("div",[t("div",[e._v("一致性：用于度量哪些数据的值在信息含义上是冲突的;")]),t("div",[e._v("\n                                            规范性：用于度量哪些数据未按统一格式 (如:结构、值域、数据类型等)存储\n                                        ")]),t("div",[e._v("\n                                            正确性：用于度量哪些数据和信息是不正确的，如逻辑正确、大小写、全半角等\n                                        ")]),t("div",[e._v("关联性：用于度量哪些关联的数据缺失;")]),t("div",[e._v("完整性：用于度量哪些数据丢失了或者哪些数据不可用;")]),t("div",[e._v("及时性：用于度量哪些数据存在数据时限超期的问题;")]),t("div",[e._v("重复性：用于度量哪些数据是重复数据或者数据的哪些属性是重复的")])])],t("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})],2)],1),t("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.ruleCategory,callback:function(t){e.$set(e.form,"ruleCategory",t)},expression:"form.ruleCategory"}},e._l(e.ruleCategoryOptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],2)],1)],1),t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{prop:"expression"}},[t("template",{slot:"label"},[e._v("规则表达式\n                            "),t("el-popover",{attrs:{placement:"right",trigger:"hover","popper-class":"popover",content:""}},[[t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.form.ruleType,expression:"form.ruleType == 1"}]},[e._v("格式为：{xx} in ('aa','bb','cc')")]),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.form.ruleType,expression:"form.ruleType == 2"}]},[e._v("\n                                            格式为：^[0-9]*$ 、^[A-Za-z0-9]+$ 等正则表达式\n                                        ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:3==e.form.ruleType,expression:"form.ruleType == 3"}]},[e._v("格式为：['aa','bb','cc']")])])],t("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})],2)],1),t("el-input",{attrs:{type:"textarea",clearable:"",placeholder:"请输入",maxlength:200,"show-word-limit":""},model:{value:e.form.expression,callback:function(t){e.$set(e.form,"expression",t)},expression:"form.expression"}})],2)],1)],1),t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"规则描述",prop:"ruleDesc"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入",clearable:"",maxlength:200,"show-word-limit":""},model:{value:e.form.ruleDesc,callback:function(t){e.$set(e.form,"ruleDesc","string"==typeof t?t.trim():t)},expression:"form.ruleDesc"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:23}},["view"!==e.optType?t("el-form-item",{attrs:{label:"测试输入值",prop:"textInputValue"}},[t("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:200,"show-word-limit":""},model:{value:e.form.textInputValue,callback:function(t){e.$set(e.form,"textInputValue","string"==typeof t?t.trim():t)},expression:"form.textInputValue"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.check}},[e._v("验证测试")])],1)],2)],1):e._e()],1)],1),t("el-row",[t("el-col",{attrs:{span:23}},["view"!==e.optType?t("el-form-item",{attrs:{label:"测试结果返回",prop:"textResponseResult"}},[t("table",{directives:[{name:"show",rawName:"v-show",value:!e.empty,expression:"!empty"}],staticStyle:{width:"100px","text-align":"center"}},[t("tr",{staticStyle:{background:"#5394eb",color:"#fff"}},[t("td",[e._v("列名")])]),e._l(e.successList,(function(r,o){return t("tr",{key:o},[t("td",[e._v(e._s(r))])])}))],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.empty,expression:"empty"}]},[e._v("未匹配到对应值")])]):e._e()],1)],1),"view"===e.optType?t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"创建人",prop:"createUserName"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.form.createUserName,callback:function(t){e.$set(e.form,"createUserName","string"==typeof t?t.trim():t)},expression:"form.createUserName"}})],1)],1)],1):e._e(),"view"===e.optType?t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime","string"==typeof t?t.trim():t)},expression:"form.createTime"}})],1)],1)],1):e._e(),"view"===e.optType?t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"更新人",prop:"updateUserName"}},[t("el-input",{attrs:{maxlength:50,"show-word-limit":""},model:{value:e.form.updateUserName,callback:function(t){e.$set(e.form,"updateUserName","string"==typeof t?t.trim():t)},expression:"form.updateUserName"}})],1)],1)],1):e._e(),"view"===e.optType?t("el-row",[t("el-col",{attrs:{span:23}},[t("el-form-item",{attrs:{label:"更新时间",prop:"updateTime"}},[t("el-input",{attrs:{maxlength:"100","show-word-limit":""},model:{value:e.form.updateTime,callback:function(t){e.$set(e.form,"updateTime","string"==typeof t?t.trim():t)},expression:"form.updateTime"}})],1)],1)],1):e._e()],1)]],2)}),[],!1,null,"729c48b9",null);t.default=m.exports},e762:function(e,t,r){"use strict";r.d(t,"b",(function(){return T})),r.d(t,"a",(function(){return D}));const o="function"==typeof Buffer,a="function"==typeof TextDecoder?new TextDecoder:void 0,s="function"==typeof TextEncoder?new TextEncoder:void 0,l=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),i=(e=>{let t={};return e.forEach((e,r)=>t[e]=r),t})(l),n=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),c="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),u=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),m=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),f=e=>{let t,r,o,a,s="";const i=e.length%3;for(let n=0;n<e.length;){if((r=e.charCodeAt(n++))>255||(o=e.charCodeAt(n++))>255||(a=e.charCodeAt(n++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|a,s+=l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}return i?s.slice(0,i-3)+"===".substring(i):s},d="function"==typeof btoa?e=>btoa(e):o?e=>Buffer.from(e,"binary").toString("base64"):f,h=o?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,o=e.length;r<o;r+=4096)t.push(p.apply(null,e.subarray(r,r+4096)));return d(t.join(""))},y=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,g=e=>e.replace(b,y),v=o?e=>Buffer.from(e,"utf8").toString("base64"):s?e=>h(s.encode(e)):e=>d(g(e)),T=(e,t=!1)=>t?u(v(e)):v(e),w=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,x=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},E=e=>e.replace(w,x),N=e=>{if(e=e.replace(/\s+/g,""),!n.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,o,a="";for(let s=0;s<e.length;)t=i[e.charAt(s++)]<<18|i[e.charAt(s++)]<<12|(r=i[e.charAt(s++)])<<6|(o=i[e.charAt(s++)]),a+=64===r?p(t>>16&255):64===o?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return a},C="function"==typeof atob?e=>atob(m(e)):o?e=>Buffer.from(e,"base64").toString("binary"):N,A=o?e=>c(Buffer.from(e,"base64")):e=>c(C(e).split("").map(e=>e.charCodeAt(0))),O=o?e=>Buffer.from(e,"base64").toString("utf8"):a?e=>a.decode(A(e)):e=>E(C(e)),_=e=>m(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),D=e=>O(_(e))},ef19:function(e,t,r){"use strict";r("034d")}}]);