(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-259e7906","chunk-12415036","chunk-2d0d43f6"],{"25e0":function(e,t,o){var a=o("91ce");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,o("499e").default)("31dbd3d3",a,!0,{sourceMap:!1,shadowMode:!1})},2696:function(e,t,o){"use strict";o.r(t),o("8e6e"),o("ac6a"),o("456d");var a=o("ade3"),r=o("2f62"),n=o("e91a"),s=o("365c"),l=o("5fe4"),i=o("1971"),c=o("0314");function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){Object(a.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var u={data:function(){return{bizCode:this.$route.query.bizCode,formId:this.$route.query.formId,tableName:this.$route.query.tableName,optType:this.$route.query.optType,nodeData:[],activeNodeData:{},activeNodeVariables:{},operationData:[],key2:+new Date,formConf:{},activeName:"0",userInfoForm:{},userInfoRules:{},statusNS:l.status,isShowFormItem:!0,tabsNames:{0:"基本信息",1:"表单信息",2:"审核历史"}}},computed:{},components:{processInfoComponent:n.default},created:function(){this.init()},methods:p(p({},Object(r.b)(["_AJAX"])),{},{init:function(){var e=this;if(!this.formId)return this.isShowFormItem=!1,this.loadUserInfo(),!1;this.isShowFormItem=!0;var t=s.default["form.design.select"]+"/"+this.formId;this._AJAX({url:t,method:"GET",data:{}}).then((function(t){e.formConf=JSON.parse(t.result.formJson)})),this.loadUserInfo()},loadUserInfo:function(){var e=this;this._AJAX({url:window.urlConfig+"/activiti/biz/select/".concat(this.bizCode),method:"GET",data:{}}).then((function(t){0===t.code&&(e.userInfoForm=t.result,e.userInfoForm.ccInfo?e.userInfoForm.ccInfo=e.userInfoForm.ccInfo.map((function(e){return e.username})):e.userInfoForm.ccInfo=[],t.result.dataMapStr&&(i.fillFormData.call(e,e.formConf.fields,JSON.parse(t.result.dataMapStr),e.formConf),e.key2=+new Date))}))},handleDown:function(){c.default.loadNode(document.querySelector("#updateNode"+this.activeName),this.userInfoForm.title+"_"+this.tabsNames[this.activeName])}})},d=(o("8f90"),o("2877")),m=Object(d.a)(u,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("audaque-detail-form-page",{staticClass:"workflow-review-edit",attrs:{title:"查看我的工单","opt-type":e.$route.query.optType}},[o("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[o("el-form",{ref:"userInfoForm",attrs:{model:e.userInfoForm,rules:e.userInfoRules,id:"updateNode0","label-width":"110px"}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"流程类型",prop:"categoryName"}},[o("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.categoryName,callback:function(t){e.$set(e.userInfoForm,"categoryName",t)},expression:"userInfoForm.categoryName"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"流程名称",prop:"processName"}},[o("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.processName,callback:function(t){e.$set(e.userInfoForm,"processName",t)},expression:"userInfoForm.processName"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"申请标题",prop:"title"}},[o("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.title,callback:function(t){e.$set(e.userInfoForm,"title",t)},expression:"userInfoForm.title"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"申请时间",prop:"applyTime"}},[o("div",{staticClass:"form-border"},[e._v("\n                            "+e._s(e.publics.formatTime(e.userInfoForm.applyTime,"Y-M-D h:m:s"))+"\n                        ")])])],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"已流转(天)",prop:"workTime"}},[o("el-input",{attrs:{disabled:""},model:{value:e.userInfoForm.workTime,callback:function(t){e.$set(e.userInfoForm,"workTime",t)},expression:"userInfoForm.workTime"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"状态",prop:"status"}},[o("div",{staticClass:"form-border"},[e._v(e._s(e.statusNS[e.userInfoForm.status]))])])],1),o("el-col",{attrs:{span:12}},[e.userInfoForm.ccInfo&&e.userInfoForm.ccInfo.length>0?o("el-form-item",{attrs:{label:"抄送人",prop:"ccInfo"}},[o("div",{staticClass:"form-border"},[e._v("\n                            "+e._s(e.userInfoForm.ccInfo.join(","))+"\n                            ")])]):e._e()],1)],1)],1),o("el-tab-pane",{attrs:{label:"表单信息",name:"1"}},[e.isShowFormItem?[Object.keys(e.formConf).length>0?o("form-parser",{key:e.key2,ref:"formParser",attrs:{id:"updateNode1",formConf:e.formConf,isDisabled:!0}}):e._e()]:o("div",{staticClass:"air-item"},[e._v("暂无表单信息!")])],2),o("el-tab-pane",{attrs:{label:"审核历史",name:"2"}},["2"===e.activeName?o("process-info-component",{attrs:{id:"updateNode2",procInstId:e.userInfoForm.procInstId,procDefId:e.userInfoForm.procDefId}}):e._e()],1)],1),o("template",{slot:"bottom"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handleDown}},[e._v("导出流程信息")])],1),o("div",{staticStyle:{position:"absolute",width:"100%",right:"99999px",top:"99999px"},attrs:{id:"copyFormNode"}})],2)}),[],!1,null,"ba11434e",null);t.default=m.exports},"5fe4":function(e,t,o){"use strict";o.r(t),o.d(t,"status",(function(){return a})),o.d(t,"reviewStatus",(function(){return r})),t.default={1:{tableName:"oa_leave_bill",type:"请假审核"},2:{tableName:"oa_finance",type:"财务审核"},3:{tableName:"sys_category",type:"流程启用审核"}};var a={0:"草稿",1:"处理中",2:"结束"},r=[{label:"待提交",value:0},{label:"处理中",value:1},{label:"通过",value:2},{label:"驳回",value:3},{label:"撤回",value:4},{label:"不通过",value:5},{label:"终止",value:6}]},"8f90":function(e,t,o){"use strict";o("a40d")},"91ce":function(e,t,o){(e.exports=o("2350")(!1)).push([e.i,"",""])},a40d:function(e,t,o){var a=o("a844");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,o("499e").default)("fddef522",a,!0,{sourceMap:!1,shadowMode:!1})},a844:function(e,t,o){(e.exports=o("2350")(!1)).push([e.i,"[data-v-ba11434e] .el-tabs{height:100%!important}[data-v-ba11434e] .el-tabs .el-tabs__content{height:100%;overflow:auto}[data-v-ba11434e] .el-tabs .el-tab-pane{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}[data-v-ba11434e] .el-tabs .el-tab-pane .operation-item{height:100%;text-align:left!important}[data-v-ba11434e] .el-tabs .el-tab-pane .operation-item .el-form-item__label{padding:0;font-weight:600}[data-v-ba11434e] .el-tabs .air-item{width:100%;height:200px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px;font-weight:700}.form-border[data-v-ba11434e]{background-color:#f5f7fa;color:#c0c4cc;padding:5px 15px;border:1px solid #dcdfe6;border-radius:4px;word-break:break-all;line-height:25px}[data-v-ba11434e] #copyFormNode .el-textarea,[data-v-ba11434e] #copyFormNode .tinymce-editor{border:1px solid #ccc;padding:10px}[data-v-ba11434e] .download-title{text-align:center;font-size:18px;font-weight:700;padding:0 0 15px 0;margin-bottom:10px;border-bottom:1px solid #e0e0e0}",""])},e91a:function(e,t,o){"use strict";o.r(t),o("8e6e"),o("ac6a"),o("456d"),o("a481"),o("28a5");var a=o("ade3"),r=o("365c"),n=o("2f62");function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){Object(a.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var i={name:"processInfoComponent",data:function(){return{tableData:[],imgUrl:null,form:{page:1,rows:10,procInstId:null}}},props:["procInstId","procDefId"],watch:{procInstId:{handler:function(e){},deep:!0}},created:function(){this.procInstId?(this.imgUrl=r.default["activiti.models.img"]+"?procInstId="+this.procInstId+"&t="+Date.now(),this.loadTableData()):this.imgUrl=r.default["activiti.models.img"]+"?procDefId="+this.procDefId+"&t="+Date.now()},methods:l(l({},Object(n.b)(["_AJAX"])),{},{loadTableData:function(){var e=this,t=this.form;t.procInstId=this.procInstId,this._AJAX({url:"activiti.task.historic",method:"GET",data:t}).then((function(t){e.tableData=t.result}))},markRed:function(e){if(!e)return"-";for(var t=e.split(","),o=0;o<t.length;o++){var a=t[o];if(/_\*$/.test(a)){var r=a.replace("_*","");t[o]='<span style="color:red;">'+r+"</span>"}}return t.join(",")},sizeChange:function(e){this.form.page=1,this.form.rows=e,this.loadTableData()},currentChange:function(e){this.form.page=e,this.loadTableData()}})},c=(o("fa51"),o("2877")),f=Object(c.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{"text-align":"center"}},[o("img",{staticStyle:{"min-height":"250px","margin-bottom":"20px","max-width":"100%"},attrs:{src:e.imgUrl}})]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,border:"","row-key":"id","tree-props":{children:"audits",hasChildren:"hasChildren"}}},[o("el-table-column",{attrs:{type:"index",label:"序号",index:function(t){return e.$utils._indexMethod(t,e.form.page,e.form.rows)},width:"50"}}),o("el-table-column",{attrs:{prop:"name",label:"活动流程"}}),o("el-table-column",{attrs:{prop:"startTime",label:"接收时间"}}),o("el-table-column",{attrs:{prop:"endTime",label:"完成时间"}}),o("el-table-column",{attrs:{prop:"assignee","show-overflow-tooltip":"",label:"参与者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{domProps:{innerHTML:e._s(e.markRed(t.row.assignee))}})]}}])}),o("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"comment",label:"环节意见"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"deleteReason",label:"审核"}})],1),o("adq-pagination",{attrs:{total:e.tableData.total,"page-size":e.form.rows,"current-page":e.form.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)}),[],!1,null,"539e58b0",null);t.default=f.exports},fa51:function(e,t,o){"use strict";o("25e0")}}]);