(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d213a6c"],{ae1c:function(e,t,a){"use strict";a.r(t),a("7f7f"),a("8e6e"),a("ac6a"),a("456d"),a("28a5");var i=a("ade3"),n=a("5c96"),r=a("47c0"),o=a("2f62"),l=a("ef29");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s={mixins:[Object(r.audaqueDeleteItemMixin)(l.deletePrivacy),Object(r.audaqueListSearchMixin)(l.privacyPage),r.audaqueConstantMixin,r.audaqueUtilsMixin],created:function(){},data:function(){return{audaqueFormInfoMixin:{}}},computed:c({},Object(o.d)(["upload"])),mounted:function(){},methods:c(c({},Object(o.b)(["_AJAX"])),{},{showPrivacy:function(e){var t=this;Object(l.downloadFile)(e.privacyStatementUrl).then((function(e){t.$AudaqueToast.dialog({title:"隐私声明",width:"1000px",className:"dialog-to-max-height",template:'<iframe :src="src" style="width:100%;height:100%"></iframe>',data:{src:e,hideCancel_a_d_q:!0},mounted:function(){},methods:{okEvent:function(){URL.revokeObjectURL(e)},cancelEvent:function(){URL.revokeObjectURL(e)}}})}))},createPrivacyHandle:function(){var e=this;this.$AudaqueToast.dialog({title:"隐私声明",width:"800px",template:'\n                    <div>\n                        <el-form ref="form" :model="form" label-width="160px" >\n                            <el-form-item \n                                label="版本号" \n                                prop="privacyStatementVersion" \n                                :rules="[\n                                    AudaqueElementValidator.isNotEmpty(\'blur\', \'请输入版本号\'),\n                                    { required: true, trigger: \'blur\', validator: versionValidator }\n                                ]"\n                            >\n                                <el-input v-model="form.privacyStatementVersion" show-word-limit  maxlength="8"></el-input>\n                            </el-form-item>\n                            <el-form-item \n                                label="上传隐私声明" \n                                prop="files" \n                                :rules="[{ required: true, trigger: \'change\', validator: validator }]"\n                            >\n                                <el-upload\n                                    ref="upload"\n                                    :limit="1"\n                                    accept="accept"\n                                    class="upload-demo"\n                                    :action="upload"\n                                    :headers="publics.ajaxHeaders()"\n                                    :file-list="form.files"\n                                    :on-exceed="onExceed"\n                                    :before-upload="onBeforeUploadHandle"\n                                    :on-change="onChangeHandle"\n                                >\n                                    <el-button size="small" type="primary">点击上传</el-button>\n                                    <div slot="tip" class="el-upload__tip" style="color:#666;">注意: 仅支持上传{{accept}}格式文件！不超过{{ uploadFileSize }}M</div>\n                                </el-upload>\n                            </el-form-item>\n                        </el-form>\n                    </div>',data:{form:{privacyStatementVersion:"",files:[]},upload:e.upload,publics:e.publics,accept:".pdf",uploadFileSize:50,AudaqueElementValidator:r.AudaqueElementValidator},mounted:function(){},methods:{validator:function(e,t,a){this.$refs.upload.uploadFiles.length>0?a():a(new Error("请上传文件"))},versionValidator:function(e,t,a){/^\d+(\.\d+){2}$/.test(t)?a():a(new Error("版本格式应该为/^\\d+(\\.\\d+){2}$/，例如2.11.3"))},okEvent:function(){var t=this,a=!1;return this.$refs.form.validate((function(i){if(!i)return a=!0,!1;var r=t.$refs.upload.uploadFiles[0],o=r.response,u=r.name;Object(l.createPrivacy)(t._AJAX)({privacyStatementVersion:t.form.privacyStatementVersion,privacyStatementName:u,privacyStatementUrl:o}).then((function(){n.Message.success("新增隐私声明成功"),e.audaqueRequestListMixin()}))})),a},cancelEvent:function(){},onBeforeUploadHandle:function(e){return this.onBeforeUpload(e,{accept:this.accept,uploadFileSize:this.fileUploadSize})},onBeforeUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{accept:"",uploadFileSize:10},a=t.accept.split(","),i=e.name,r=i.split(".").pop().toLowerCase();return-1===a.indexOf(".".concat(r))&&t.accept?(n.Message.error("只允许上传".concat(a.join(","),"格式的文件")),!1):!(e.size>1024*t.uploadFileSize*1024)||(n.Message.error("超出单个文件最大".concat(t.uploadFileSize,"M限制！")),!1)},onExceed:function(){n.Message.error("只能上传1个文件，请先删除再上传")},onChangeHandle:function(){this.$refs.form.validateField("files")}}})}})},d=a("2877"),p=Object(d.a)(s,(function(){var e=this,t=e._self._c;return t("audaque-table-list-page",[t("template",{slot:"title"},[t("audaque-table-title",{attrs:{title:e.$route.meta.name}},[t("audaque-action-icon",{attrs:{iconClass:"main-add",title:"新增"},on:{click:e.createPrivacyHandle}}),t("audaque-action-icon",{attrs:{iconClass:"main-list-search",title:"筛选"},on:{click:e.audaqueToggleSearchMinix}})],1)],1),t("template",{slot:"search"},[t("audaque-table-search",{directives:[{name:"show",rawName:"v-show",value:e.audaqueSearchBarVisibleMixin,expression:"audaqueSearchBarVisibleMixin"}],on:{close:function(t){e.audaqueSearchBarVisibleMixin=!1},search:e.audaqueSearchListMixin,reset:e.audaqueResetListMixin}},[t("audaque-table-search-item",{attrs:{title:"版本号"}},[t("el-input",{attrs:{placeholder:"请输入版本号",clearable:""},model:{value:e.audaqueSearchMixin.privacyStatementVersion,callback:function(t){e.$set(e.audaqueSearchMixin,"privacyStatementVersion","string"==typeof t?t.trim():t)},expression:"audaqueSearchMixin.privacyStatementVersion"}})],1)],1)],1),[t("audaque-table",{attrs:{data:e.audaqueDataListMixin.datas,"table-fetch-status":e.audaqueTableFetchStatusMixin},on:{"request-list":e.audaqueRequestListMixin}},[t("el-table-column",{attrs:{width:e.audaqueIndexWidthMixin,label:"序号",type:"index",index:e.audaqueIndexMethodMixin}}),t("el-table-column",{attrs:{label:"版本号",prop:"privacyStatementVersion","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"PDF名称",prop:"privacyStatementName","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("audaque-link-text",{attrs:{type:"key",title:a.row.privacyStatementName},on:{click:function(t){return e.showPrivacy(a.row)}}})]}}])}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime",sortable:"",width:e.audaqueDateWidthMixin,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.audaqueFormatTimeToDateMixin(t.row.lastModifyTime)))]}}])}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("audaque-link-text",{attrs:{iconClass:"main-delete",title:"删除"},on:{click:function(t){return e.audaqueDeleteMixin(a.row)}}})]}}])})],1),t("audaque-pagination",{attrs:{"current-page":e.audaquePageRequestMixin.pageNo,"page-size":e.audaquePageRequestMixin.pageSize,total:e.audaqueDataListMixin.total},on:{"size-change":e.audaqueOnSizeChangeMixin,"current-change":e.audaqueOnCurrentChangeMixin}})]],2)}),[],!1,null,"c8984b30",null);t.default=p.exports}}]);