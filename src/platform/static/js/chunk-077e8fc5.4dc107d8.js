(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-077e8fc5"],{"2d68":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".get-edit-item[data-v-30a91412]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-30a91412]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-30a91412]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-30a91412]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-30a91412]{width:100%;border:1px solid #dcdfe6;padding:24px}.custom_table1 tbody td[data-v-30a91412],.custom_table1 thead th[data-v-30a91412]{width:11%}.custom_table[data-v-30a91412]{border-collapse:collapse;width:100%;text-align:left}.custom_table thead tr[data-v-30a91412]{background:#f9fafb}.custom_table thead th[data-v-30a91412]{color:#666;font-size:13px}.custom_table tbody tr[data-v-30a91412]{border:1px solid #ebeef5;padding:5px 0}.custom_table tbody i[data-v-30a91412]{color:red;font-size:30px;cursor:pointer}",""])},"2e39":function(e,t,a){"use strict";a.r(t),a("7f7f"),a("a481"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("8e6e"),a("456d"),a("ac6a");var l=a("ade3"),r=a("2f62"),o=a("a026");function n(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return i(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var l=0,r=function(){};return{s:r,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={data:function(){return{nodeClickData:{},loading:!1,activeName:"first",value:"",defaultProps:{children:"children",label:"name"},param:{id:"",tableName:"",tableComment:"",modelName:this.$route.query.modelName,modelId:this.$route.query.modelId,columnInfoList:[],sql:""},rules:{modelName:[{required:!0,message:"请选择模块",trigger:"change"}],sql:[{required:!0,message:"请输入sql",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"}],tableComment:[{required:!0,message:"请输入表注释",trigger:"blur"}]}}},computed:m({},Object(r.d)("subjectLayer",["subjectLayerList","dataTypeOptions","tableInfoList","createTableList","tableData","levelTreeList"])),methods:m(m(m(m({},Object(r.b)("subjectLayer",["SUBJECTLAYER_LIST","TABLEINFO_LIST","DELETESUBJECTLAYER","GETTABLEDATA_LIST","DELETETABLE","MODIFYCOLUMN","LEVELTREELIST","COPYTABLE","GETDATATYPEOPTIONS_LIST","CREATETABLESD","CREATETABLEDDL"])),Object(r.b)(["_AJAX"])),Object(r.b)("bussinesCopy",["getDBColumnType"])),{},{handleNodeClick:function(e,t){this.param.modelName=e.name,this.param.modelId=e.id,this.nodeClickData=e},exportFun:function(e){this.publics.exportFile(this,e,{})},handleUpload:function(e){var t=this;if(!this.param.modelId)return this.$refs.upload.value=null,o.default.prototype.$message.warning("请选择建表目录！");this.formData=new FormData,this.formData.append("upFile",e.target.files[0]),this.formData.append("categoryId",this.param.modelId),this.loading=!0,this._AJAX({url:"subjectLayer.tableImport",data:this.formData,method:"POST"}).then((function(e){t.loading=!1,0===e.code?(t.$message({message:"导入成功",type:"success"}),t.$router.go(-1)):t.$message({message:"导入失败",type:"error"}),t.delFormData(),t.STANDARDCODELIST()})).catch((function(){t.loading=!1,t.delFormData()}))},delFormData:function(){this.$refs.upload.value=null;var e,t=n(this.formData.keys());try{for(t.s();!(e=t.n()).done;){var a=e.value;this.formData.delete(a)}}catch(e){t.e(e)}finally{t.f()}},handleClick:function(e){this.activeName=e.name,"second"==e.name?document.getElementsByClassName("el-button el-button--primary el-button--medium")[0].style.display="none":document.getElementsByClassName("el-button el-button--primary el-button--medium")[0].style.display=""},addRow:function(){this.param.columnInfoList.push({})},removeRow:function(e){this.param.columnInfoList.splice(e,1)},primaryChange:function(e,t){1==this.param.columnInfoList[t].primaryKey&&(this.param.columnInfoList[t].nullAble="0")},subBtn:function(){var e=this,t=this;"first"==t.activeName?this.$refs.createTableForm.validate((function(a){if(!a)return!1;e.$store.commit("SHOW_LOADING",!0),e.CREATETABLESD(t.param).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"建表成功",methods:{okEvent:function(){}}})}))})):"third"==t.activeName&&this.$refs.createTableByDdl.validate((function(a){if(!a)return!1;var l=e.param.sql;t.param.sql=encodeURIComponent(l),e.$store.commit("SHOW_LOADING",!0),e.CREATETABLEDDL(t.param).then((function(t){0==t.code&&e.$AudaqueToast.tip({template:"建表成功",methods:{okEvent:function(){}}})})),e.param.sql=l}))}}),mounted:function(){},created:function(){this.SUBJECTLAYER_LIST(),this.GETDATATYPEOPTIONS_LIST()}},u=(a("318d"),a("2877")),d=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("audaque-table-list-page",[[[t("audaque-detail-form-page",{attrs:{title:"建表"},on:{"submit-click":e.subBtn}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"手动建表",name:"first"}},[[t("el-form",{ref:"createTableForm",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"模块",prop:"modelName",rules:e.rules.modelName}},[t("el-input",{attrs:{disabled:"",placeholder:"请选择模块","show-word-limit":""},model:{value:e.param.modelName,callback:function(t){e.$set(e.param,"modelName","string"==typeof t?t.trim():t)},expression:"param.modelName"}})],1),t("el-form-item",{attrs:{label:"表名",prop:"tableName",rules:e.rules.tableName}},[t("el-input",{attrs:{placeholder:"请输入表名","οnkeyup":e.param.tableName=e.param.tableName.replace(/[\u4E00-\u9FA5]/g,""),maxlength:"200","show-word-limit":""},model:{value:e.param.tableName,callback:function(t){e.$set(e.param,"tableName","string"==typeof t?t.trim():t)},expression:"param.tableName"}})],1),t("el-form-item",{attrs:{label:"表注释",prop:"tableComment",rules:e.rules.tableComment}},[t("el-input",{attrs:{placeholder:"请输入表注释",maxlength:"200","show-word-limit":""},model:{value:e.param.tableComment,callback:function(t){e.$set(e.param,"tableComment","string"==typeof t?t.trim():t)},expression:"param.tableComment"}})],1)],1),t("el-col",{attrs:{span:24}},[t("table",{staticClass:"custom_table custom_table1"},[t("thead",[t("tr",[t("th",[e._v("序号")]),t("th",[e._v("列名")]),t("th",[e._v("列中文名")]),t("th",[e._v("类型")]),t("th",[e._v("可为空")]),t("th",[e._v("主键")]),t("th",[e._v("长度")]),t("th",[e._v("精度")]),t("th",[t("el-tooltip",{staticClass:"item",attrs:{size:"mini",effect:"dark",content:"新增",placement:"top-start"}},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addRow}})],1)],1)])]),t("tbody",e._l(e.param.columnInfoList,(function(a,l){return t("tr",{key:l},[t("td",[t("label",[e._v(e._s(l+1))])]),t("td",[t("el-input",{attrs:{size:"mini",placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:a.columnName,callback:function(t){e.$set(a,"columnName","string"==typeof t?t.trim():t)},expression:"i.columnName"}})],1),t("td",[t("el-input",{attrs:{size:"mini",placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:a.columnComment,callback:function(t){e.$set(a,"columnComment","string"==typeof t?t.trim():t)},expression:"i.columnComment"}})],1),t("td",[t("el-select",{attrs:{filterable:"",size:"mini"},model:{value:a.columnType,callback:function(t){e.$set(a,"columnType",t)},expression:"i.columnType"}},e._l(e.dataTypeOptions,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),t("td",[t("el-select",{attrs:{size:"mini"},model:{value:a.nullAble,callback:function(t){e.$set(a,"nullAble",t)},expression:"i.nullAble"}},[t("el-option",{key:"1",attrs:{label:"Y",value:"1"}}),t("el-option",{key:"0",attrs:{label:"N",value:"0"}})],1)],1),t("td",[t("el-select",{attrs:{size:"mini"},on:{change:function(t){return e.primaryChange(a,l)}},model:{value:a.primaryKey,callback:function(t){e.$set(a,"primaryKey",t)},expression:"i.primaryKey"}},[t("el-option",{key:"1",attrs:{label:"是",value:"1"}}),t("el-option",{key:"0",attrs:{label:"否",value:"0"}})],1)],1),t("td",[t("el-input",{attrs:{size:"mini",placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:a.length,callback:function(t){e.$set(a,"length","string"==typeof t?t.trim():t)},expression:"i.length"}})],1),t("td",[t("el-input",{attrs:{size:"mini",placeholder:"请输入",maxlength:"200","show-word-limit":""},model:{value:a.scale,callback:function(t){e.$set(a,"scale","string"==typeof t?t.trim():t)},expression:"i.scale"}})],1),t("td",[t("el-tooltip",{staticClass:"item",attrs:{size:"mini",effect:"dark",content:"删除",placement:"top-start"}},[t("i",{staticClass:"el-icon-remove",style:{color:"#f00"},on:{click:function(t){return e.removeRow(l)}}})])],1)])})),0)])])],1)],1)]],2),t("el-tab-pane",{attrs:{label:"导入建表",name:"second"}},[[t("i",{staticClass:"iconfont icondaochu2 audaque-rect-icon",staticStyle:{cursor:"pointer"},attrs:{title:"下载导入模板"},on:{click:function(t){return e.exportFun("/subjectLayer/createTableTemplateDown.do")}}},[e._v("下载导入模板")]),t("i",{staticClass:"iconfont icondaoru1 audaque-rect-icon import-template",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$refs.upload.click()}}},[e._v("模板建表\n                "),t("input",{ref:"upload",staticClass:"inputFile",staticStyle:{display:"none"},attrs:{type:"file",accept:".xls,.xlsx"},on:{change:function(t){return e.handleUpload(t)}}})])]],2),t("el-tab-pane",{attrs:{label:"DDL建表",name:"third"}},[[t("el-form",{ref:"createTableByDdl",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"模块",prop:"modelName",rules:e.rules.modelName}},[t("el-input",{attrs:{disabled:"",placeholder:"请选择模块","show-word-limit":""},model:{value:e.param.modelName,callback:function(t){e.$set(e.param,"modelName","string"==typeof t?t.trim():t)},expression:"param.modelName"}})],1),t("el-form-item",{attrs:{label:"DDL语句",prop:"sql",rules:e.rules.sql}},[t("el-input",{attrs:{rows:15,placeholder:"请输入sql",type:"textarea"},model:{value:e.param.sql,callback:function(t){e.$set(e.param,"sql",t)},expression:"param.sql"}})],1)],1)],1)],1)]],2)],1)],1)]]],2)}),[],!1,null,"30a91412",null);t.default=d.exports},"318d":function(e,t,a){"use strict";a("e693")},e693:function(e,t,a){var l=a("2d68");l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals),(0,a("499e").default)("5a90e313",l,!0,{sourceMap:!1,shadowMode:!1})}}]);