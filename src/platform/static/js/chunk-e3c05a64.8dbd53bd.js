(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e3c05a64"],{"27e0":function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".get-edit-item[data-v-6cafb304]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-6cafb304]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-6cafb304]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-6cafb304]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-6cafb304]{width:100%;border:1px solid #dcdfe6;padding:24px}",""])},6354:function(e,t,r){"use strict";r("9bb2")},"9bb2":function(e,t,r){var i=r("27e0");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),(0,r("499e").default)("eb9f2dee",i,!0,{sourceMap:!1,shadowMode:!1})},f350:function(e,t,r){"use strict";r.r(t),r("7f7f"),r("8e6e"),r("ac6a"),r("456d"),r("6b54"),r("3b2b");var i=r("ade3"),a=r("2f62");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o={watch:{"param.ruleType":function(e,t){e!==t&&(this.param.ruleExpression="",this.selectedRowId="",this.templateSelection="")},"param.ruleExpression":function(e){}},data:function(){return{isRegex:!1,templateSelection:"",templateRadio:null,selectedRowId:"",dialogTableVisible:!1,selectedCategory:"",level:[],category:[{name:"撒旦",value:"123"}],ruleType:{},ruleList:{},value:"",rowId:this.$route.query.id,filter:"view"!=this.$route.query.filter,param:{category:"1",createTime:"",createUser:"",id:"",level:"1",ruleExpression:"",ruleType:"1",sensitiveDesc:"",sensitiveName:"",updateTime:"",updateUser:""},rules:{category:[{required:!0,message:"请输入所属分类",trigger:"change"}],createTime:[{required:!0,message:"请输入创建时间",trigger:"blur"}],createUser:[{required:!0,message:"请输入创建人",trigger:"blur"}],id:[{required:!0,message:"请输入id",trigger:"blur"}],level:[{required:!0,message:"请输入分级类型",trigger:"change"}],ruleExpression:[{required:!0,message:"请输入规则表达式",trigger:"blur"}],ruleType:[{required:!0,message:"请输入规则类型",trigger:"change"}],sensitiveName:[{required:!0,message:"请输入敏感词名称",trigger:"blur"}],updateTime:[{required:!0,message:"请输入更新时间",trigger:"blur"}],updateUser:[{required:!0,message:"请输入更新人",trigger:"blur"}]}}},computed:{},methods:s(s(s({},Object(a.b)("dgpSensitive",["GOEDITDGPSENSITIVE","MODIFYDGPSENSITIVE","ADDDGPSENSITIVE","CHECKDGPSENSITIVE","DGPSENSITIVELEVEL","DGPSENSITIVECATEGORY","DGPSENSITIVERULETYPE"])),Object(a.b)(["_AJAX"])),{},{importRule:function(){var e=this;this.selectedRowId?this._AJAX({url:"dgpSensitive.getRule",method:"GET",data:{ruleId:this.selectedRowId}}).then((function(t){e.param.ruleExpression=t,e.dialogTableVisible=!1})):this.$message.warning("请选择规则!")},singleElection:function(e){this.templateSelection=e,this.selectedRowId=e.id},openRule:function(){var e=this;this._AJAX({url:"dgpSensitive.ruleList",method:"GET",data:{rule:this.param.ruleType}}).then((function(t){e.ruleList=t,e.selectedRowId="",e.templateSelection="",e.dialogTableVisible=!0}))},subBtn:function(){var e=this,t=this;this.$refs.dgpSensitiveForm.validate((function(r){if(!r)return!1;if(e.$store.commit("SHOW_LOADING",!0),e.rowId){if(1==e.param.ruleType){if(!/^{\d+}\s+(like|=|in)\s+(('[^']*')|("[^"]*"))(\s*,\s*(('[^']*')|("[^"]*")))*$/i.test(e.param.ruleExpression))return e.$message.error("输入的SQL规则不符合规范"),void e.$store.commit("SHOW_LOADING",!1)}else if(2==e.param.ruleType){try{new RegExp(e.param.ruleExpression),e.isRegex=!0}catch(t){e.isRegex=!1}if(!e.isRegex)return e.$message.error("输入的正则规则不符合规范"),void e.$store.commit("SHOW_LOADING",!1)}e.param.id=e.rowId,e.MODIFYDGPSENSITIVE(e.param).then((function(r){0==r.code&&e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}else{if(1==e.param.ruleType){if(!/^\{\d+\}\s+(like|=|in)\s+(\(('.*?',\s*)*'.*?'\)|'.*?')$/.test(e.param.ruleExpression))return e.$message.error("输入的SQL规则不符合规范"),void e.$store.commit("SHOW_LOADING",!1)}else if(2==e.param.ruleType){try{new RegExp(e.param.ruleExpression),e.isRegex=!0}catch(t){e.isRegex=!1}if(!e.isRegex)return e.$message.error("输入的正则规则不符合规范"),void e.$store.commit("SHOW_LOADING",!1)}var i=e.param;e.ADDDGPSENSITIVE(i).then((function(r){0==r.code&&e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}}))},check:function(){this.CHECKDGPSENSITIVE(this.param)},initLevel:function(){var e=this;this.DGPSENSITIVELEVEL().then((function(t){e.level=t}))},initCategory:function(){var e=this;this.DGPSENSITIVECATEGORY().then((function(t){e.category=t}))},initRuleType:function(){var e=this;this.DGPSENSITIVERULETYPE().then((function(t){e.ruleType=t}))}}),mounted:function(){},created:function(){var e=this;this.initLevel(),this.initRuleType(),this.initCategory(),this.rowId&&this.GOEDITDGPSENSITIVE({id:this.rowId}).then((function(t){e.param.ruleExpression=t.ruleExpression,e.param.category=t.category?t.category.toString():"",e.param.createTime=t.createTime,e.param.createUser=t.createUser,e.param.id=t.id,e.param.level=t.level?t.level.toString():"",e.param.ruleType=t.ruleType?t.ruleType.toString():"",e.param.sensitiveDesc=t.sensitiveDesc,e.param.sensitiveName=t.sensitiveName,e.param.updateTime=t.updateTime,e.param.updateUser=t.updateUser}))}},n=(r("6354"),r("2877")),p=Object(n.a)(o,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{attrs:{title:e.filter?e.rowId?"敏感词编辑":"敏感词新增":"敏感词查看","opt-type":e.$route.query.filter},on:{"submit-click":e.subBtn}},[[t("el-form",{ref:"dgpSensitiveForm",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:!e.filter}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"敏感词名称",prop:"sensitiveName",rules:e.rules.sensitiveName}},[t("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入敏感词名称",maxlength:"200","show-word-limit":""},model:{value:e.param.sensitiveName,callback:function(t){e.$set(e.param,"sensitiveName","string"==typeof t?t.trim():t)},expression:"param.sensitiveName"}})],1),t("el-form-item",{attrs:{label:"所属分类",prop:"category",rules:e.rules.category}},[t("el-radio-group",{model:{value:e.param.category,callback:function(t){e.$set(e.param,"category",t)},expression:"param.category"}},e._l(e.category,(function(r){return t("el-radio",{key:r.code,attrs:{label:r.code}},[e._v(e._s(r.name))])})),1)],1),t("el-form-item",{attrs:{label:"分级类型",prop:"level",rules:e.rules.level}},[t("el-radio-group",{model:{value:e.param.level,callback:function(t){e.$set(e.param,"level","string"==typeof t?t.trim():t)},expression:"param.level"}},e._l(e.level,(function(r){return t("el-radio",{key:r.code,attrs:{label:r.code}},[e._v(e._s(r.name))])})),1)],1),t("el-form-item",{attrs:{label:"敏感词说明",prop:"sensitiveDesc"}},[t("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入敏感词说明",maxlength:"200","show-word-limit":""},model:{value:e.param.sensitiveDesc,callback:function(t){e.$set(e.param,"sensitiveDesc","string"==typeof t?t.trim():t)},expression:"param.sensitiveDesc"}})],1),t("el-form-item",{attrs:{label:"规则类型",prop:"ruleType",rules:e.rules.ruleType}},[t("el-radio-group",{model:{value:e.param.ruleType,callback:function(t){e.$set(e.param,"ruleType","string"==typeof t?t.trim():t)},expression:"param.ruleType"}},e._l(e.ruleType,(function(r){return t("el-radio",{key:r.code,attrs:{label:r.code}},[e._v(e._s(r.name))])})),1)],1),t("el-form-item",{attrs:{label:"规则表达式",prop:"ruleExpression",rules:e.rules.ruleExpression}},[t("el-input",{attrs:{disabled:!e.filter,type:"textarea",placeholder:"请输入规则表达式",maxlength:"200","show-word-limit":""},model:{value:e.param.ruleExpression,callback:function(t){e.$set(e.param,"ruleExpression",t)},expression:"param.ruleExpression"}}),t("el-button",{staticClass:"iconfont icondaoru1 icondaoru audaque-rect-icon",staticStyle:{"border-color":"#5394eb"},on:{click:e.openRule}},[e._v("引入")])],1),1==e.param.ruleType?t("span",{staticClass:"tips",staticStyle:{color:"red"}},[t("br"),e._v("注：SQL规则配置时需要以字符串形式配置 "),t("br"),e._v("示例:"),t("br"),e._v("{0} like '123%'"),t("br"),e._v("    {0} in ('123','12','1')"),t("br"),e._v("  {0} = '123'\n            ")]):e._e()],1)],1)],1)],t("el-dialog",{attrs:{title:"引入规则",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("el-table",{ref:"multipleTable",staticClass:"el-table-common__list",attrs:{"tooltip-effect":"light","highlight-current-row":"",stripe:"",data:e.ruleList,border:""},on:{"row-click":e.singleElection}},[t("el-table-column",{attrs:{label:"",width:"65"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-radio",{staticClass:"radio",attrs:{label:r.row},model:{value:e.templateSelection,callback:function(t){e.templateSelection=t},expression:"templateSelection"}},[e._v(" \n          ")])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",label:"序号",align:"center",width:"80"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"id",label:"id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleName",label:"规则名称"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleType",label:"规则类型"},scopedSlots:e._u([{key:"default",fn:function(r){return[1===r.row.ruleType?t("span",[e._v("SQL规则")]):e._e(),2===r.row.ruleType?t("span",[e._v("正则规则")]):e._e()]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"expression",label:"规则表达式"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"ruleDesc",label:"规则说明"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),t("el-button",{staticStyle:{"border-color":"#5394eb"},attrs:{type:"primary"},on:{click:e.importRule}},[e._v("引入")])],1)],1)],2)}),[],!1,null,"6cafb304",null);t.default=p.exports}}]);