(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0eb78768"],{2989:function(e,t,r){"use strict";r("742c")},5933:function(e,t,r){"use strict";r.r(t),r("8e6e"),r("456d"),r("7f7f"),r("28a5"),r("ac6a");var a=r("ade3"),i=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={data:function(){var e=this;return{defaultCheckedKeys:[],roleId:this.$route.query.roleId,filter:"view"!=this.$route.query.filter,param:{resources:{},roleName:""},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{validator:function(t,r,a){e.checkSpecialKey(r)?r.length<2||r.length>20?a(new Error("请输入2-20位字符")):a():a(new Error("不能含有特殊字符"))},trigger:"blur"}]},defaultProps:{children:"children",label:"name",disabled:"other"}}},computed:l({},Object(i.d)("webkit",["resourceList","isArr","checkedObj"])),methods:l(l({},Object(i.b)("webkit",["RESOURCELIST","GOEDITROLE","MODIFYROLE","ADDROLE"])),{},{checkSpecialKey:function(e){for(var t=0;t<e.length;t++)if(-1!="[`~!#$^&*()=|{}':;'\\[\\].<>/?~！#￥……&*（）——|{}【】‘；：”“'。，,、？]‘'".indexOf(e.substr(t,1)))return!1;return!0},subTreeBtn:function(){var e=this,t=this;this.$refs.ruleform.validate((function(r){if(!r)return!1;if(e.$refs.tree.getCheckedKeys().forEach((function(t){if(null!=t&&""!=t){var r=t.split(".")[0];e.param.resources[r]?e.param.resources[r]=e.param.resources[r]+","+t.split(".")[1]:e.param.resources[r]=t.split(".")[1]}})),e.$store.commit("SHOW_LOADING",!0),e.roleId)e.param.roleId=e.roleId,e.MODIFYROLE(e.param).then((function(r){0==r.code&&e.$AudaqueToast.tip({template:"修改成功",methods:{okEvent:function(){t.$router.go(-1)}}})}));else{var a=e.param;e.ADDROLE(a).then((function(r){0==r.code&&e.$AudaqueToast.tip({template:"添加成功",methods:{okEvent:function(){t.$router.go(-1)}}})}))}}))}}),mounted:function(){},created:function(){var e=this;this.RESOURCELIST({filter:this.filter}),this.roleId&&this.GOEDITROLE({roleId:this.roleId}).then((function(t){e.defaultCheckedKeys=t.result.myResource.split(","),e.param.roleName=t.result.myRole.name}))}},n=(r("2989"),r("2877")),c=Object(n.a)(s,(function(){var e=this,t=e._self._c;return t("audaque-detail-form-page",{attrs:{title:e.filter?e.roleId?"编辑角色":"新增角色":"查看角色","opt-type":e.$route.query.filter},on:{"submit-click":e.subTreeBtn}},[[t("el-form",{ref:"ruleform",staticClass:"form-item",attrs:{model:e.param,"label-width":"120px",rules:e.rules,disabled:!e.filter}},[t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{attrs:{disabled:!e.filter,placeholder:"请输入内容",maxlength:"20","show-word-limit":""},model:{value:e.param.roleName,callback:function(t){e.$set(e.param,"roleName","string"==typeof t?t.trim():t)},expression:"param.roleName"}})],1),t("el-form-item",{attrs:{label:"功能权限"}},[t("el-tree",{ref:"tree",staticClass:"get-edit-el-tree",attrs:{data:e.resourceList,"show-checkbox":"","default-expanded-keys":e.isArr,"default-checked-keys":e.defaultCheckedKeys,"node-key":"value","highlight-current":"",props:e.defaultProps}})],1)],1)]],2)}),[],!1,null,"50fbf4aa",null);t.default=c.exports},"742c":function(e,t,r){var a=r("b49d");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,r("499e").default)("1e10e5b0",a,!0,{sourceMap:!1,shadowMode:!1})},b49d:function(e,t,r){(e.exports=r("2350")(!1)).push([e.i,".get-edit-item[data-v-50fbf4aa]{padding-top:20px;margin:0 50px}.get-edit-item li[data-v-50fbf4aa]{margin-top:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.get-edit-item li .get-edit-type[data-v-50fbf4aa]{height:40px;line-height:40px}.get-edit-item li .get-edit-title[data-v-50fbf4aa]{width:80px;color:#3a405b;height:40px;line-height:40px}.get-edit-item li .el-tree[data-v-50fbf4aa]{width:100%;border:1px solid #dcdfe6;padding:24px}",""])}}]);